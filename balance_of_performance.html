<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Analyse und Clustering von Rundenzeiten beim 24-Stunden-Rennen am Nürburgring 2023</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="balance_of_performance_files/libs/clipboard/clipboard.min.js"></script>
<script src="balance_of_performance_files/libs/quarto-html/quarto.js"></script>
<script src="balance_of_performance_files/libs/quarto-html/popper.min.js"></script>
<script src="balance_of_performance_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="balance_of_performance_files/libs/quarto-html/anchor.min.js"></script>
<link href="balance_of_performance_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="balance_of_performance_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="balance_of_performance_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="balance_of_performance_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="balance_of_performance_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Analyse und Clustering von Rundenzeiten beim 24-Stunden-Rennen am Nürburgring 2023</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div style="width:image width px; font-size:75%; text-align:right;">
<pre><code>&lt;img src="img/kolby-milton-njOuW7E1y5g-unsplash.jpg" width="width" height="height" style="padding-bottom:0.2em;" /&gt;
&lt;figcaption&gt;Foto von Kolby Milton auf Unsplash&lt;/figcaption&gt;</code></pre>
</div>
<p><strong>Angewandte Programmierung - SoSe 2023 - FOM - Köln</strong></p>
<p><strong>Sonstige Beteiligung, 2. Juni 2023</strong></p>
<p><em>Patrick Haas</em></p>
<section id="inhalt" class="level2">
<h2 class="anchored" data-anchor-id="inhalt">Inhalt<a class="anchor" id="toc" href=""></a></h2>
<ul>
<li><a href="#business-understanding">Business Understanding</a>
<ul>
<li><a href="#business-understanding-forschungsfrage">Forschungsfrage</a></li>
<li><a href="#business-understanding-datenursprung">Datenherkunft</a></li>
</ul></li>
<li><a href="#data-understanding">Data Understanding/Data Preparation</a>
<ul>
<li><a href="#data-understanding-data-wrangling">Data Wrangling</a></li>
<li><a href="#data-understanding-data-exploration">Datenexploration</a></li>
</ul></li>
<li><a href="#modeling">Modeling</a></li>
<li><a href="#evaluation">Evaluation</a>
<ul>
<li><a href="#evaluation-krit">Kritische Würdigung</a></li>
<li><a href="#evaluation-ausblick">Ausblick</a></li>
</ul></li>
<li><a href="#referenzen">Referenzen</a></li>
</ul>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> folium</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> suncalc</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> cluster, mixture</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>_DARK_MODE <span class="op">=</span> <span class="va">False</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="business-understanding" class="level2">
<h2 class="anchored" data-anchor-id="business-understanding">Business Understanding<a class="anchor" id="business-understanding" href=""></a></h2>
<p>Am langen Wochenende vom 18.5.-21.5.2023 fand das <em>51. 24-Stunden-Rennen auf dem Nürburgring</em> statt <a href="#wikipedia2023a">[1]</a>. Neben Kirmesatmosphäre rund um die Strecke konnte erstmals ein Ferrari das Rennen für sich entscheiden (und damit auch das erste Mal seit 2002 kein deutsches Fabrikat).</p>
<p>Rund um das Rennen kam in Berichterstattung und Interviews immer wieder die Behauptung auf, dass die anderen zum Gesamtsieg fähigen Fahrzeuge gegenüber dem Ferrari durch die <em>Balance of Performance (BoP)</em> benachteiligt seien. Die BoP ist ein Verfahren, das für die Fahrzeuge unterschiedliche Mindestgewichte, Luftmengenbegrenzungen, Ladedruckkurven und Tankvolumina vorgibt, um alle Kandidaten trotz unterschiedlicher Fahrzeugkonzepte (Saug-/Turbomotoren, Motorplatzierung) möglichst chancengleich starten zu lassen. Sie wird vor jedem Rennen tagesaktuell durch die Rennleitung festgelegt, um die Chancengleichheit zu wahren <a href="#adac2023a">[2]</a>.</p>
<section id="forschungsfrage" class="level3">
<h3 class="anchored" data-anchor-id="forschungsfrage">Forschungsfrage<a class="anchor" id="business-understanding-forschungsfrage" href=""></a></h3>
<p>Lässt sich diese Behauptung durch die erreichten Runden- und Sektorzeiten der einzelnen Fahrzeuge fundieren? Wurden die Ferrari-Fahrzeuge tatsächlich durch die BoP bevorzugt?</p>
</section>
<section id="datenherkunft" class="level3">
<h3 class="anchored" data-anchor-id="datenherkunft">Datenherkunft<a class="anchor" id="business-unterstanding-datenherkunft" href=""></a></h3>
<p>Die Datenbasis ist die offizielle Zeitnahme des Rennens, die vom Veranstalter auf dem Teilnehmerportal des 24-Stunden-Rennens zur Verfügung gestellt wird <a href="#adac2023b">[3]</a>.</p>
</section>
</section>
<section id="data-understandingdata-preparation" class="level2">
<h2 class="anchored" data-anchor-id="data-understandingdata-preparation">Data Understanding/Data Preparation<a class="anchor" id="data-understanding" href=""></a></h2>
<div style="width:image width px; font-size:75%;">
<pre><code>&lt;img src="img/mobius_strip.png" width="50%" style="padding-bottom:0.2em;" /&gt;
&lt;figcaption&gt;Darstellung via Midjourney AI&lt;/figcaption&gt;</code></pre>
</div>
<section id="data-wrangling" class="level3">
<h3 class="anchored" data-anchor-id="data-wrangling">Data Wrangling<a class="anchor" id="data-understanding-data-wrangling" href=""></a></h3>
<p>Auf den ersten Blick wirken die Zeitnahmedaten, als ob sie aus einer über lange Zeit gewachsenen Excel-Applikation exportiert wurden. Um den Datensatz erkundbar zu machen, war an dieser Stelle jede Menge Iteration zwischen Data Understanding und Data Preparation erforderlich.</p>
<p>Hier die Highlights des zeitraubenden Iterationsprozesses:</p>
<ol type="1">
<li>Die CSV-Dateien werden im ISO 8859-15-Encoding zur Verfügung gestellt. Um sowohl mit dem Editor als auch mit Python beschwerdefrei arbeiten zu können, konvertieren wir sie mit <code>iconv</code> nach UTF-8:</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> I <span class="kw">in</span> <span class="pp">*</span>.csv <span class="kw">;</span> <span class="cf">do</span> <span class="fu">iconv</span> <span class="at">-f</span> ISO-8859-15 <span class="at">-t</span> UTF-8 <span class="at">-o</span> <span class="va">$I</span>.temp <span class="va">$I</span> <span class="kw">;</span> <span class="fu">mv</span> <span class="at">-f</span> <span class="va">$I</span>.temp <span class="va">$I</span> <span class="kw">;</span> <span class="cf">done</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li>Alle Rundenzeiten sind in einem Kurzformat angegeben, das grob <code>HH:MM:ss.SSS</code> entspricht. Die Behandlung von führenden Nullen ist inkonsistent und Nullwerte werden meist komplett weggelassen, was die Verwendung von Python- oder pandas-Bordmitteln zum Parsing erschwert. Wir übergeben <code>pd.read_csv()</code> daher eine Konverterfunktion, die solche Zeiten in Millisekunden umrechnet:</li>
</ol>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> timing_to_milliseconds(time: <span class="bu">str</span>) <span class="op">-&gt;</span> np.int64 <span class="op">|</span> <span class="bu">float</span>:</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Converts a timing string to milliseconds."""</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    seconds <span class="op">=</span> minutes <span class="op">=</span> hours <span class="op">=</span> microseconds <span class="op">=</span> np.int64(<span class="dv">0</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">match</span> time.split(<span class="st">"."</span>):</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>        case [r, ms]:</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>            rest, milliseconds <span class="op">=</span> r, np.int64(ms)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> _:</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> np.nan</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">match</span> rest.split(<span class="st">":"</span>):</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>        case [h, m, s]:</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>            hours <span class="op">=</span> np.int64(h)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>            minutes <span class="op">=</span> np.int64(m)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>            seconds <span class="op">=</span> np.int64(s)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>        case [m, s]:</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>            minutes <span class="op">=</span> np.int64(m)</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>            seconds <span class="op">=</span> np.int64(s)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>        case [s]:</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>            seconds <span class="op">=</span> np.int64(s)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> _:</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> np.nan</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> hours <span class="op">*</span> <span class="dv">3600000</span> <span class="op">+</span> minutes <span class="op">*</span> <span class="dv">60000</span> <span class="op">+</span> seconds <span class="op">*</span> <span class="dv">1000</span> <span class="op">+</span> milliseconds</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li><p>Einige Strings müssen von Leerzeichen befreit werden. Wir verwenden <code>str.strip</code> als Konverterfunktion</p></li>
<li><p>Die Sektordaten enthalten die Information, ob eine gegebene Sektorzeit zum entsprechenden Zeitpunkt eine Bestzeit war (<code>SEKTOR{n}_BESTE_ZEIT</code>). Diese booleschen Werte sind als ‘J’ und ‘N’ kodiert. <code>pd.read_csv()</code> bietet zwar die Möglichkeit, über <code>true_values</code> und <code>false_values</code> Zeichenketten für Wahrheitswerte zu definieren, aber das führt dazu, dass fehlende Werte in anderen Spalten falsch interpretiert werden. Wir verwenden auch hierfür eine eigene Konverterfunktion.</p></li>
</ol>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_sector_times_csv(_source: <span class="bu">str</span> <span class="op">|</span> <span class="bu">list</span>[<span class="bu">str</span>]) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    source <span class="op">=</span> []</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">type</span>(_source) <span class="op">==</span> <span class="bu">str</span>:</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>        source <span class="op">=</span> [_source]</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="bu">type</span>(_source) <span class="op">==</span> <span class="bu">list</span>:</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>        source <span class="op">=</span> _source</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"Invalid source type. Must be str or list[str]"</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    timing_converters <span class="op">=</span> {</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        feature: timing_to_milliseconds</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> feature <span class="kw">in</span> [</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>            <span class="st">"RUNDENZEIT"</span>,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>            <span class="st">"THEORETISCHE_BESTZEIT"</span>,</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">"DURCHGANGSZEIT"</span>,</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR1_ZEIT"</span>,</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR2_ZEIT"</span>,</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR3_ZEIT"</span>,</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR4_ZEIT"</span>,</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR5_ZEIT"</span>,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR6_ZEIT"</span>,</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR7_ZEIT"</span>,</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR8_ZEIT"</span>,</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR9_ZEIT"</span>,</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>            <span class="st">"THEORETISCHE_BESTZEIT"</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>    string_converters <span class="op">=</span> {</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>        feature: <span class="bu">str</span>.strip</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> feature <span class="kw">in</span> [<span class="st">"KLASSE"</span>, <span class="st">"KLASSESORT"</span>, <span class="st">"UNTERKLASSE"</span>, <span class="st">"KLASSEKURZ"</span>]</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    bool_converters <span class="op">=</span> {</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>        feature: <span class="kw">lambda</span> x: <span class="va">True</span> <span class="cf">if</span> x <span class="op">==</span> <span class="st">"J"</span> <span class="cf">else</span> <span class="va">False</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> feature <span class="kw">in</span> [</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR1_BESTE_ZEIT"</span>, </span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR2_BESTE_ZEIT"</span>, </span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR3_BESTE_ZEIT"</span>, </span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR4_BESTE_ZEIT"</span>, </span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR5_BESTE_ZEIT"</span>, </span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR6_BESTE_ZEIT"</span>, </span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR7_BESTE_ZEIT"</span>, </span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR8_BESTE_ZEIT"</span>, </span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SEKTOR9_BESTE_ZEIT"</span>,</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.concat(</span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>        [</span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>            pd.read_csv(</span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>                f,</span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>                delimiter<span class="op">=</span><span class="st">";"</span>,</span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>                <span class="co"># can't use true_values and false_values or </span></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>                <span class="co"># some missing sector data gets parsed as boolean</span></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>                <span class="co"># true_values=["J"],</span></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>                <span class="co"># false_values=["N"],</span></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>                converters<span class="op">=</span>{<span class="op">**</span>timing_converters, <span class="op">**</span>string_converters, <span class="op">**</span>bool_converters},</span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>                dtype<span class="op">=</span>{<span class="st">"FAHRER3_ORT"</span>: <span class="bu">str</span>}</span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> f <span class="kw">in</span> source</span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="5" type="1">
<li>Geschmackssache, aber da wir gerade dabei sind: Die in den CSV-Dateien enthaltenen Spaltentitel sind großgeschrieben und auf Deutsch. Wir ersetzen sie durch kleingeschriebene englische Titel:</li>
</ol>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rename_sector_times_columns(df: pd.DataFrame) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    header_mapping <span class="op">=</span> {</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">"STNR"</span>: <span class="st">"car_number"</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"KUERZEL"</span>: <span class="st">"abbreviation"</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"FAHRER_NR"</span>: <span class="st">"driver_number"</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        <span class="co"># generate mappings for FAHRER{N}</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"NATION"</span>: <span class="st">"team_nationality"</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"BEWERBER"</span>: <span class="st">"team"</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"TEAM"</span>: <span class="st">"team_category"</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"FAHRZEUG"</span>: <span class="st">"car"</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RUNDE_NR"</span>: <span class="st">"lap_number"</span>,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"DURCHGANGSZEIT"</span>: <span class="st">"elapsed_time"</span>,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"TAGESZEIT"</span>: <span class="st">"time_of_day"</span>,</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RUNDENZEIT"</span>: <span class="st">"lap_time"</span>,</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RUNDENZEIT_IN_SEKUNDEN"</span>: <span class="st">"lap_time_seconds"</span>,</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">"DIESCHNELLSTE"</span>: <span class="st">"is_fastest"</span>,</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">"KLASSE"</span>: <span class="st">"class"</span>,</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">"KLASSESORT"</span>: <span class="st">"class_sort"</span>,</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">"UNTERKLASSE"</span>: <span class="st">"subclass"</span>,</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">"KLASSEKURZ"</span>: <span class="st">"class_short"</span>,</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>        <span class="co"># generate mapping for SEKTOR{N}</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">"TOPSPEED_KMH"</span>: <span class="st">"top_speed_kmh"</span>,</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">"TOPSPEED_BESTE_SPEED"</span>: <span class="st">"top_speed_best_speed"</span>,</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>        <span class="st">"TOPSPEED_KMH2"</span>: <span class="st">"top_speed_kmh2"</span>,</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">"TOPSPEED_BESTE_SPEED2"</span>: <span class="st">"top_speed_best_speed2"</span>,</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">"TOPSPEED_KMH3"</span>: <span class="st">"top_speed_kmh3"</span>,</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">"TOPSPEED_BESTE_SPEED3"</span>: <span class="st">"top_speed_best_speed3"</span>,</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">"SEKTOR_BESTE_SUMME"</span>: <span class="st">"sector_best_sum"</span>,</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RANG"</span>: <span class="st">"rank"</span>,</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>        <span class="st">"INPIT"</span>: <span class="st">"in_pit"</span>,</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">"CANCELLED"</span>: <span class="st">"cancelled"</span>,</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">"PITSTOPDURATION"</span>: <span class="st">"pitstop_duration"</span>,</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>        <span class="st">"BEWERBERLIZENZ"</span>: <span class="st">"applicant_license"</span>,</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>        <span class="st">"PITIN_TIME"</span>: <span class="st">"pitin_time"</span>,</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RUNDE_NR_TEXT"</span>: <span class="st">"lap_number_text"</span>,</span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>        <span class="st">"WET"</span>: <span class="st">"wet"</span>,</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>        <span class="st">"PRO"</span>: <span class="st">"pro"</span>,</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>        <span class="st">"PROAM"</span>: <span class="st">"pro_am"</span>,</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>        <span class="st">"PRIO"</span>: <span class="st">"priority"</span>,</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>        <span class="st">"STINT"</span>: <span class="st">"stint"</span>,</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>        <span class="st">"LAPINSTINT"</span>: <span class="st">"lap_in_stint"</span>,</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>        <span class="st">"THEORETISCHE_BESTZEIT"</span>: <span class="st">"theoretical_best_time"</span>,</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># generate mapping for FAHRER{N}</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">9</span>):</span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="ss">f"FAHRER</span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">"</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="ss">f"driver</span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">"</span></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>        driver <span class="op">=</span> {</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f"</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">_NAME"</span>: <span class="ss">f"</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">_lastname"</span>,</span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f"</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">_VORNAME"</span>: <span class="ss">f"</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">_firstname"</span>,</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f"</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">_ORT"</span>: <span class="ss">f"</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">_city"</span>,</span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f"</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">_SPONSORLIZENZ"</span>: <span class="ss">f"</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">_sponsor_license"</span>,</span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f"</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">_SPONSOR"</span>: <span class="ss">f"</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">_sponsor"</span>,</span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f"</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">_LIZENZ"</span>: <span class="ss">f"</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">_license"</span>,</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f"</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">_NATION"</span>: <span class="ss">f"</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">_nationality"</span>,</span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f"</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">_PUNKTEWERTUNG"</span>: <span class="ss">f"</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">_points"</span>,</span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>        header_mapping <span class="op">=</span> {<span class="op">**</span>header_mapping, <span class="op">**</span>driver}</span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>    <span class="co"># generate mapping for SEKTOR{N}</span></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="ss">f"SEKTOR</span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">"</span></span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="ss">f"sector"</span></span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>        sector <span class="op">=</span> {</span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f"</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">_ZEIT"</span>: <span class="ss">f"</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">time_</span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">"</span>,</span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f"</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">_BESTE_ZEIT"</span>: <span class="ss">f"</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">is_best_time_</span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">"</span>,</span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f"</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">_KMH"</span>: <span class="ss">f"</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">speed_kmh_</span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">"</span>,</span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f"</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">_BESTE_SPEED"</span>: <span class="ss">f"</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">is_best_speed_</span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">"</span>,</span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a>        header_mapping <span class="op">=</span> {<span class="op">**</span>header_mapping, <span class="op">**</span>sector}</span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df.rename(columns<span class="op">=</span>header_mapping)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="6" type="1">
<li>In der explorativen Datenanalyse könnten die jeweils aktiven Fahrer:innen pro Startnummer und Runde interessant sein. Alle möglichen Fahrer:innen einer Startnummer sind als <code>FAHRER{n}_NAME</code>, <code>FAHRER{n}_VORNAME</code>, usw. in jeder Zeile der Zeitnahmedaten aufgeführt. Die Spalte <code>FAHRER_NR</code> besagt, welche:r Fahrer:in gerade aktiv ist. Wir verwenden eine Funktion, um die redundanten Informationen zu entfernen und nur aktive Fahrer:innen beizubehalten:</li>
</ol>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> select_current_driver(df: pd.DataFrame) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    newdf <span class="op">=</span> pd.DataFrame(df)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    newdf[<span class="st">"driver_name"</span>] <span class="op">=</span> newdf.<span class="bu">apply</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">lambda</span> x: <span class="ss">f"</span><span class="sc">{</span>x<span class="sc">.</span>iloc[<span class="dv">3</span> <span class="op">+</span> (x[<span class="st">'driver_number'</span>] <span class="op">-</span> <span class="dv">1</span>) <span class="op">*</span> <span class="dv">8</span>]<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>x<span class="sc">.</span>iloc[<span class="dv">4</span> <span class="op">+</span> (x[<span class="st">'driver_number'</span>] <span class="op">-</span> <span class="dv">1</span>) <span class="op">*</span> <span class="dv">8</span>]<span class="sc">}</span><span class="ss">"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        axis<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    newdf[<span class="st">"driver_license"</span>] <span class="op">=</span> newdf.<span class="bu">apply</span>(</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">lambda</span> x: x.iloc[<span class="dv">8</span> <span class="op">+</span> (x[<span class="st">"driver_number"</span>] <span class="op">-</span> <span class="dv">1</span>) <span class="op">*</span> <span class="dv">8</span>], axis<span class="op">=</span><span class="dv">1</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> newdf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="7" type="1">
<li>Wir entfernen alle Features, die für die weitere Analyse nicht von Belang sind:</li>
</ol>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> drop_unused_columns(df: pd.DataFrame) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df.drop(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span>[</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>            <span class="st">"abbreviation"</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>            <span class="st">"applicant_license"</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">"cancelled"</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">"class_sort"</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">"class"</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver_license"</span>,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver_number"</span>,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver1_city"</span>,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver1_firstname"</span>,</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver1_lastname"</span>,</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver1_license"</span>,</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver1_nationality"</span>,</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver1_points"</span>,</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver1_sponsor_license"</span>,</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver1_sponsor"</span>,</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver2_city"</span>,</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver2_firstname"</span>,</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver2_lastname"</span>,</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver2_license"</span>,</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver2_nationality"</span>,</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver2_points"</span>,</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver2_sponsor_license"</span>,</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver2_sponsor"</span>,</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver3_city"</span>,</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver3_firstname"</span>,</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver3_lastname"</span>,</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver3_license"</span>,</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver3_nationality"</span>,</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver3_points"</span>,</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver3_sponsor_license"</span>,</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver3_sponsor"</span>,</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver4_city"</span>,</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver4_firstname"</span>,</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver4_lastname"</span>,</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver4_license"</span>,</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver4_nationality"</span>,</span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver4_points"</span>,</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver4_sponsor_license"</span>,</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver4_sponsor"</span>,</span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver5_city"</span>,</span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver5_firstname"</span>,</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver5_lastname"</span>,</span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver5_license"</span>,</span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver5_nationality"</span>,</span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver5_points"</span>,</span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver5_sponsor_license"</span>,</span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver5_sponsor"</span>,</span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver6_city"</span>,</span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver6_firstname"</span>,</span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver6_lastname"</span>,</span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver6_license"</span>,</span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver6_nationality"</span>,</span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver6_points"</span>,</span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver6_sponsor_license"</span>,</span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver6_sponsor"</span>,</span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver7_city"</span>,</span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver7_firstname"</span>,</span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver7_lastname"</span>,</span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver7_license"</span>,</span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver7_nationality"</span>,</span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver7_points"</span>,</span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver7_sponsor_license"</span>,</span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver7_sponsor"</span>,</span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver8_city"</span>,</span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver8_firstname"</span>,</span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver8_lastname"</span>,</span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver8_license"</span>,</span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver8_nationality"</span>,</span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver8_points"</span>,</span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver8_sponsor_license"</span>,</span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a>            <span class="st">"driver8_sponsor"</span>,</span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a>            <span class="st">"is_fastest"</span>,</span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a>            <span class="st">"lap_number_text"</span>,</span>
<span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a>            <span class="st">"lap_time_seconds"</span>,</span>
<span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a>            <span class="st">"pitin_time"</span>,</span>
<span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a>            <span class="st">"pitstop_duration"</span>,</span>
<span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a>            <span class="st">"priority"</span>,</span>
<span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a>            <span class="st">"pro"</span>,</span>
<span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a>            <span class="st">"pro_am"</span>,</span>
<span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a>            <span class="st">"rank"</span>,</span>
<span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sector_best_sum"</span>,</span>
<span id="cb9-85"><a href="#cb9-85" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_time_1"</span>,</span>
<span id="cb9-86"><a href="#cb9-86" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_speed_1"</span>,</span>
<span id="cb9-87"><a href="#cb9-87" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectorspeed_kmh_1"</span>,</span>
<span id="cb9-88"><a href="#cb9-88" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_time_2"</span>,</span>
<span id="cb9-89"><a href="#cb9-89" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_speed_2"</span>,</span>
<span id="cb9-90"><a href="#cb9-90" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectorspeed_kmh_2"</span>,</span>
<span id="cb9-91"><a href="#cb9-91" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_time_3"</span>,</span>
<span id="cb9-92"><a href="#cb9-92" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_speed_3"</span>,</span>
<span id="cb9-93"><a href="#cb9-93" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectorspeed_kmh_3"</span>,</span>
<span id="cb9-94"><a href="#cb9-94" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_time_4"</span>,</span>
<span id="cb9-95"><a href="#cb9-95" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_speed_4"</span>,</span>
<span id="cb9-96"><a href="#cb9-96" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectorspeed_kmh_4"</span>,</span>
<span id="cb9-97"><a href="#cb9-97" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_time_5"</span>,</span>
<span id="cb9-98"><a href="#cb9-98" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_speed_5"</span>,</span>
<span id="cb9-99"><a href="#cb9-99" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectorspeed_kmh_5"</span>,</span>
<span id="cb9-100"><a href="#cb9-100" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_time_6"</span>,</span>
<span id="cb9-101"><a href="#cb9-101" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_speed_6"</span>,</span>
<span id="cb9-102"><a href="#cb9-102" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectorspeed_kmh_6"</span>,</span>
<span id="cb9-103"><a href="#cb9-103" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_time_7"</span>,</span>
<span id="cb9-104"><a href="#cb9-104" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_speed_7"</span>,</span>
<span id="cb9-105"><a href="#cb9-105" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectorspeed_kmh_7"</span>,</span>
<span id="cb9-106"><a href="#cb9-106" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_time_8"</span>,</span>
<span id="cb9-107"><a href="#cb9-107" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_speed_8"</span>,</span>
<span id="cb9-108"><a href="#cb9-108" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectorspeed_kmh_8"</span>,</span>
<span id="cb9-109"><a href="#cb9-109" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_time_9"</span>,</span>
<span id="cb9-110"><a href="#cb9-110" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectoris_best_speed_9"</span>,</span>
<span id="cb9-111"><a href="#cb9-111" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sectorspeed_kmh_9"</span>,</span>
<span id="cb9-112"><a href="#cb9-112" aria-hidden="true" tabindex="-1"></a>            <span class="st">"subclass"</span>,</span>
<span id="cb9-113"><a href="#cb9-113" aria-hidden="true" tabindex="-1"></a>            <span class="st">"team_category"</span>,</span>
<span id="cb9-114"><a href="#cb9-114" aria-hidden="true" tabindex="-1"></a>            <span class="st">"team_nationality"</span>,</span>
<span id="cb9-115"><a href="#cb9-115" aria-hidden="true" tabindex="-1"></a>            <span class="st">"top_speed_best_speed"</span>,</span>
<span id="cb9-116"><a href="#cb9-116" aria-hidden="true" tabindex="-1"></a>            <span class="st">"top_speed_best_speed2"</span>,</span>
<span id="cb9-117"><a href="#cb9-117" aria-hidden="true" tabindex="-1"></a>            <span class="st">"top_speed_best_speed3"</span>,</span>
<span id="cb9-118"><a href="#cb9-118" aria-hidden="true" tabindex="-1"></a>            <span class="st">"top_speed_kmh"</span>,</span>
<span id="cb9-119"><a href="#cb9-119" aria-hidden="true" tabindex="-1"></a>            <span class="st">"top_speed_kmh2"</span>,</span>
<span id="cb9-120"><a href="#cb9-120" aria-hidden="true" tabindex="-1"></a>            <span class="st">"top_speed_kmh3"</span>,</span>
<span id="cb9-121"><a href="#cb9-121" aria-hidden="true" tabindex="-1"></a>            <span class="st">"wet"</span>,</span>
<span id="cb9-122"><a href="#cb9-122" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb9-123"><a href="#cb9-123" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="8" type="1">
<li>Dann definieren wir noch einen Index, um jede Zeile durch Startnummer und Rundennummer eindeutig zu identifizieren:</li>
</ol>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> make_lap_index(df: pd.DataFrame) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df.set_index([<span class="st">"car_number"</span>, <span class="st">"lap_number"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="9" type="1">
<li>Abschließend setzen wir die Puzzleteile zusammen und laden die Daten in ein DataFrame:</li>
</ol>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_sector_times(_source: <span class="bu">str</span> <span class="op">|</span> <span class="bu">list</span>[<span class="bu">str</span>]) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> read_sector_times_csv(_source)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> rename_sector_times_columns(df)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> select_current_driver(df)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> drop_unused_columns(df)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> make_lap_index(df)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>df_race_sectors  <span class="op">=</span> read_sector_times([</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"data/2023/24h/race_rennen_sektorzeiten_part_1.csv"</span>,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"data/2023/24h/race_rennen_sektorzeiten_part_2.csv"</span>,</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>df_race_sectors.sample(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">team</th>
<th data-quarto-table-cell-role="th">car</th>
<th data-quarto-table-cell-role="th">elapsed_time</th>
<th data-quarto-table-cell-role="th">time_of_day</th>
<th data-quarto-table-cell-role="th">lap_time</th>
<th data-quarto-table-cell-role="th">class_short</th>
<th data-quarto-table-cell-role="th">sectortime_1</th>
<th data-quarto-table-cell-role="th">sectortime_2</th>
<th data-quarto-table-cell-role="th">sectortime_3</th>
<th data-quarto-table-cell-role="th">sectortime_4</th>
<th data-quarto-table-cell-role="th">sectortime_5</th>
<th data-quarto-table-cell-role="th">sectortime_6</th>
<th data-quarto-table-cell-role="th">sectortime_7</th>
<th data-quarto-table-cell-role="th">sectortime_8</th>
<th data-quarto-table-cell-role="th">sectortime_9</th>
<th data-quarto-table-cell-role="th">in_pit</th>
<th data-quarto-table-cell-role="th">stint</th>
<th data-quarto-table-cell-role="th">lap_in_stint</th>
<th data-quarto-table-cell-role="th">theoretical_best_time</th>
<th data-quarto-table-cell-role="th">driver_name</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">car_number</th>
<th data-quarto-table-cell-role="th">lap_number</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">633</td>
<td data-quarto-table-cell-role="th">72</td>
<td>Four Motors Bioconcept-Car</td>
<td>Porsche Cayman GT4 CS (Typ981)</td>
<td>105922822</td>
<td>05:25:22.822</td>
<td>687977</td>
<td>AT</td>
<td>47168.0</td>
<td>49873.0</td>
<td>83932.0</td>
<td>13098.0</td>
<td>163655.0</td>
<td>42837.0</td>
<td>232938.0</td>
<td>21577.0</td>
<td>32899.0</td>
<td>N</td>
<td>10</td>
<td>2</td>
<td>567572</td>
<td>Cramer, Henning</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">91</td>
<td data-quarto-table-cell-role="th">114</td>
<td>NaN</td>
<td>Porsche 911 Carrera</td>
<td>137095803</td>
<td>14:04:55.803</td>
<td>824424</td>
<td>V6</td>
<td>187995.0</td>
<td>53700.0</td>
<td>94376.0</td>
<td>15336.0</td>
<td>144669.0</td>
<td>49017.0</td>
<td>208532.0</td>
<td>34335.0</td>
<td>36464.0</td>
<td>A</td>
<td>25</td>
<td>1</td>
<td>578895</td>
<td>Rings, Sebastian</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">44</td>
<td data-quarto-table-cell-role="th">122</td>
<td>Falken Motorsports</td>
<td>Porsche 911 GT3 R (992)</td>
<td>124224378</td>
<td>10:30:24.378</td>
<td>515223</td>
<td>SP 9</td>
<td>40622.0</td>
<td>42870.0</td>
<td>64760.0</td>
<td>10298.0</td>
<td>121017.0</td>
<td>35837.0</td>
<td>150769.0</td>
<td>20394.0</td>
<td>28656.0</td>
<td>N</td>
<td>16</td>
<td>5</td>
<td>490957</td>
<td>Eriksson, Joel</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">125</td>
<td data-quarto-table-cell-role="th">26</td>
<td>Huber Motorsport</td>
<td>Porsche 911 GT3 Cup (992)</td>
<td>72482789</td>
<td>20:08:02.789</td>
<td>547194</td>
<td>Cup 2</td>
<td>42821.0</td>
<td>45965.0</td>
<td>69980.0</td>
<td>11121.0</td>
<td>116771.0</td>
<td>37669.0</td>
<td>164205.0</td>
<td>20112.0</td>
<td>NaN</td>
<td>J</td>
<td>3</td>
<td>9</td>
<td>513237</td>
<td>Wehrmann, Hans</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">72</td>
<td data-quarto-table-cell-role="th">13</td>
<td>BMW Junior Team</td>
<td>BMW M4 GT3</td>
<td>64360598</td>
<td>17:52:40.598</td>
<td>499532</td>
<td>SP 9</td>
<td>40437.0</td>
<td>42923.0</td>
<td>63191.0</td>
<td>10253.0</td>
<td>106257.0</td>
<td>35221.0</td>
<td>153002.0</td>
<td>19901.0</td>
<td>28347.0</td>
<td>N</td>
<td>2</td>
<td>6</td>
<td>490034</td>
<td>Verhagen, Neil</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Die Daten sind jetzt in einem Zustand, in dem wir sie für die explorative Datenanalyse verwenden können.</p>
</section>
<section id="datenexploration" class="level3">
<h3 class="anchored" data-anchor-id="datenexploration">Datenexploration<a class="anchor" id="data-understanding-data-exploration" href=""></a></h3>
<p>Wir sehen uns zuerst die Verteilung der Rundenzeiten in der gesamtsiegfähigen SP 9-Klasse an. Dazu filtern wir die Daten nach der Klasse, lassen Boxenrunden weg, gruppieren nach Fahrzeug und plotten die Rundenzeiten als Violinplot mit überlagerten Einzelwerten:</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_time_distribution(df: pd.DataFrame, value: <span class="bu">str</span> <span class="op">=</span> <span class="st">"lap_time"</span>, hue: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>) <span class="op">-&gt;</span> <span class="va">None</span>:</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.copy()</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"__sort_q2"</span>] <span class="op">=</span> df.groupby(<span class="st">"car"</span>)[value].transform(np.quantile, q<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    f, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">10</span>))</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    df.sort_values(<span class="st">"__sort_q2"</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    sns.violinplot(</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[<span class="st">"car"</span>],</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[value],</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>        bw<span class="op">=</span><span class="fl">0.1</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>        palette<span class="op">=</span><span class="st">"deep"</span>,</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>        cut<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    sns.stripplot(</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[<span class="st">"car"</span>],</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[value],</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>        jitter<span class="op">=</span><span class="fl">0.2</span>,</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>        size<span class="op">=</span><span class="fl">2.5</span>,</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span><span class="st">"red"</span> <span class="cf">if</span> <span class="kw">not</span> hue <span class="cf">else</span> <span class="va">None</span>,</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>        palette<span class="op">=</span><span class="st">"bright"</span> <span class="cf">if</span> hue <span class="cf">else</span> <span class="va">None</span>,</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>        hue<span class="op">=</span>df[hue] <span class="cf">if</span> hue <span class="cf">else</span> <span class="va">None</span>,</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    sns.despine()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df_sp9_sectors <span class="op">=</span> pd.DataFrame(df_race_sectors.query(<span class="st">"class_short == 'SP 9'"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>plot_time_distribution(df_sp9_sectors)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="balance_of_performance_files/figure-html/cell-12-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Erster Eindruck: Einige extreme Ausreißer sorgen dafür, dass der interessante Bereich der Verteilung schwer zu erkennen ist. Wir filtern die Daten nach Rundenzeiten unter 13 Minuten:</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>plot_time_distribution(df_sp9_sectors.query(<span class="st">"lap_time &lt; 780000"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="balance_of_performance_files/figure-html/cell-13-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Auffällig ist die Q-Tip-Form. Die Rundenzeiten streuen insgesamt zwar stark, sammeln sich aber dennoch um einige Schwerpunkte.</p>
<p>Die Intuition aus dem Business Understanding dazu ist, dass Profifahrer:innen sehr konstante Rundenzeiten fahren können. Das bedeutet, dass die Verteilung ihrer Zeiten sich mit geringer Varianz um einen Mittelwert bewegen und nach dem zentralen Grenzwertsatz durch eine Gauß-Verteilung annäherbar sein sollte. Allerdings gilt das nur für ungestörte Runden.</p>
<p>Werfen wir einen kurzen Blick auf mögliche Störgrößen:</p>
<div style="font-size:50%;">
<pre><code>&lt;span style="width: 15%; display: inline-block;"&gt;
    &lt;img src="img/musa-haef-traffic-unsplash.jpg" style="padding-bottom:0.2em" /&gt;
    &lt;figcaption&gt;Foto von Musa Haef auf Unsplash&lt;/figcaption&gt;
&lt;/span&gt;
&lt;span style="width: 15%; display: inline-block;"&gt;
    &lt;img src="img/Auto_Racing_Yellow.svg" style="padding-bottom:0.2em;" /&gt;
&lt;/span&gt;
&lt;span style="width: 15%; display: inline-block;"&gt;
    &lt;img src="img/Auto_Racing_Code_60_flag.svg" style="padding-bottom:0.2em;" /&gt;
&lt;/span&gt;
&lt;span style="width: 15%; display: inline-block;"&gt;
    &lt;img src="img/david-latorre-romero-pit-stop-unsplash.jpg" style="padding-bottom:0.2em;" /&gt;
    &lt;figcaption&gt;Foto von david latorre romero auf Unsplash&lt;/figcaption&gt;
&lt;/span&gt;
&lt;span style="width: 15%; display: inline-block;"&gt;
    &lt;img src="img/kenny-eliason-flat-tire-unsplash.jpg" style="padding-bottom:0.2em;" /&gt;
    &lt;figcaption&gt;Foto von Kenny Eliason auf Unsplash&lt;/figcaption&gt;
&lt;/span&gt;
&lt;span style="width: 15%; display: inline-block;"&gt;
    &lt;img src="img/saeed-gh-wet-road-unsplash.jpg" style="padding-bottom:0.2em;" /&gt;
    &lt;figcaption&gt;Foto von Saeed Gh auf Unsplash&lt;/figcaption&gt;
&lt;/span&gt;</code></pre>
</div>
<ul>
<li><strong>Verkehr</strong>: Die Fahrer:innen müssen langsamere Fahrzeuge überholen</li>
<li><strong>Gelbe Flagge</strong>: Überholverbot bis zur Aufhebung. Die Fahrer:innen hängen im gegebenenfalls deutlich langsameren Verkehr fest</li>
<li><strong>Doppelte gelbe Flagge</strong>: Wie Gelb, zusätzlich mit Geschwindigkeitsbegrenzung auf 120 km/h</li>
<li><strong>Code 60</strong>: Wie Gelb, zusätzlich mit Geschwindigkeitsbegrenzung auf 60 km/h</li>
<li><strong>Boxenstops</strong>: Die Fahrer:innen steuern geplant zum Tanken, Reifenwechsel und Fahrerwechsel oder ungeplant zur Reparatur die Box an. Für Boxenstopps wird eine Mindeststandzeit vorgeschrieben</li>
<li><strong>Defekt</strong>: Die Fahrer:innen müssen in langsamer Fahrt zurück an die Box oder fallen endgültig aus</li>
<li><strong>Streckenbedingungen</strong>: Bei nasser Fahrbahn müssen die Fahrer:innen ihre Fahrweise deutlich anpassen</li>
<li><strong>Kombinationen</strong> aus den genannten Störgrößen</li>
</ul>
<p><strong>Doppeltgelbe</strong>, <strong>Code-60</strong>-Bereiche und <strong>geplante Boxenstops</strong> haben intuitiv einen konstanten, vergleichsweise großen Einfluss auf die Rundenzeiten aller betroffenen Fahrer. Sie verschieben Teile der Gaußverteilung mehr oder weniger stark nach rechts verschieben und sorgen für die Schwerpunkte im Stab der Q-Tips.</p>
<p><strong>Verkehr</strong> und <strong>gelbe Flaggen</strong> sind dagegen eher zufällige Faktoren mit unsystematischem Einfluss, die sich in der Varianz der Verteilungen widerspiegeln.</p>
<p>Die <strong>Streckenbedingungen</strong> waren während des Rennens 2023 außergewöhnlich konstant. Es wurde keine Rennrunde unter nassen Bedingungen gefahren. Tag-, Nacht- und Blendbedingungen sowie die Außentemperatur sind ebenfalls wichtige Faktoren, die allerdings alle Teilnehmer gleichermaßen betreffen.</p>
<p><strong>Defekte</strong> sind ein Sonderfall, da sie die Rundenzeit eines einzelnen Fahrers in der Regel dramatisch beeinflussen, aber eher seltene Ereignisse sind.</p>
<p>Um die Forschungsfrage zu beantworten, wollen wir Rundenzeiten, welche Störgrößen enthalten, möglichst herausfiltern. Wir gehen dazu von der Annahme aus, dass die Rundenzeitverteilung einem Gaußschen Mischmodell <a href="#skl2023a">[4]</a> folgt, d.h. dass sie sich in mehrere überlagerte Gaußverteilungen zerlegen lassen. Wir sortieren die gefundenen Komponenten nach ihrem Mittelwert und nutzen das Modell anschließend zur Klassifikation der Rundenzeiten - je kleiner der Clusterindex, desto ungestörter die Rundenzeit.</p>
<div style="width:image width px; font-size:75%;">
<pre><code>&lt;img src="img/lap_time_distribution_clusters.jpg" width="width" height="height" style="padding-bottom:0.2em;" /&gt;
&lt;figcaption&gt;Grün: Ungestörte Runden. Gelb: Leichte Störung, orange: starke Störung. Rot: Boxenstops.&lt;/figcaption&gt;</code></pre>
</div>
</section>
</section>
<section id="modelingfeature-learning" class="level2">
<h2 class="anchored" data-anchor-id="modelingfeature-learning">Modeling/Feature Learning<a class="anchor" id="modeling" href=""></a></h2>
<p>Um die Rundenzeiten der Fahrzeuge zu clustern und das Cluster den Daten hinzuzufügen, verwenden wir das <code>GaussianMixture</code>-Modell aus <em>scikit-learn</em> <a href="#skl2023b">[5]</a>. Das Modell ist ein Unsupervised Learning-Verfahren, das mit der Anzahl der erwarteten Cluster initialisiert wird und dann die Parameter der Gaußverteilungen, die die Daten am besten beschreiben, lernt.</p>
<p>Runden mit Boxenstopp-Störung sind in den Daten entsprechend markiert, wir filtern sie hier heraus. Ebenso entfernen wir Runden, die mehr als 11 Minuten dauern. Diese sind in der Regel durch Defekte oder Unfälle verursacht und würden die Clusterbildung stören.</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> gmc(df: pd.DataFrame, column: <span class="bu">str</span>, group_name: <span class="bu">str</span>) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    gmc <span class="op">=</span> mixture.GaussianMixture(n_components<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> pd.DataFrame(df)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    component_labels <span class="op">=</span> gmc.fit_predict(res[[column]])</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    component_mean_ranks <span class="op">=</span> gmc.means_.flatten().argsort().argsort()</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    component_ranks <span class="op">=</span> np.vectorize(component_mean_ranks.take)(component_labels)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    res[<span class="ss">f"cluster_by_</span><span class="sc">{</span>group_name<span class="sc">}</span><span class="ss">"</span>] <span class="op">=</span> component_ranks</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> res</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>df_sp9_sectors <span class="op">=</span> df_sp9_sectors.query(<span class="st">"in_pit == 'N' and lap_time &lt; 660000"</span>)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>df_sp9_sectors <span class="op">=</span> df_sp9_sectors.groupby(<span class="st">"car"</span>, group_keys<span class="op">=</span><span class="va">False</span>).<span class="bu">apply</span>(gmc, <span class="st">"lap_time"</span>, <span class="st">"car_lap"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\p\miniconda3\envs\mbb-agp-sobe\Lib\site-packages\sklearn\cluster\_kmeans.py:1382: UserWarning: KMeans is known to have a memory leak on Windows with MKL, when there are less chunks than available threads. You can avoid it by setting the environment variable OMP_NUM_THREADS=1.
  warnings.warn(
C:\Users\p\miniconda3\envs\mbb-agp-sobe\Lib\site-packages\sklearn\cluster\_kmeans.py:1382: UserWarning: KMeans is known to have a memory leak on Windows with MKL, when there are less chunks than available threads. You can avoid it by setting the environment variable OMP_NUM_THREADS=3.
  warnings.warn(
C:\Users\p\miniconda3\envs\mbb-agp-sobe\Lib\site-packages\sklearn\cluster\_kmeans.py:1382: UserWarning: KMeans is known to have a memory leak on Windows with MKL, when there are less chunks than available threads. You can avoid it by setting the environment variable OMP_NUM_THREADS=2.
  warnings.warn(
C:\Users\p\miniconda3\envs\mbb-agp-sobe\Lib\site-packages\sklearn\cluster\_kmeans.py:1382: UserWarning: KMeans is known to have a memory leak on Windows with MKL, when there are less chunks than available threads. You can avoid it by setting the environment variable OMP_NUM_THREADS=2.
  warnings.warn(
C:\Users\p\miniconda3\envs\mbb-agp-sobe\Lib\site-packages\sklearn\cluster\_kmeans.py:1382: UserWarning: KMeans is known to have a memory leak on Windows with MKL, when there are less chunks than available threads. You can avoid it by setting the environment variable OMP_NUM_THREADS=1.
  warnings.warn(
C:\Users\p\miniconda3\envs\mbb-agp-sobe\Lib\site-packages\sklearn\cluster\_kmeans.py:1382: UserWarning: KMeans is known to have a memory leak on Windows with MKL, when there are less chunks than available threads. You can avoid it by setting the environment variable OMP_NUM_THREADS=1.
  warnings.warn(
C:\Users\p\miniconda3\envs\mbb-agp-sobe\Lib\site-packages\sklearn\cluster\_kmeans.py:1382: UserWarning: KMeans is known to have a memory leak on Windows with MKL, when there are less chunks than available threads. You can avoid it by setting the environment variable OMP_NUM_THREADS=2.
  warnings.warn(
C:\Users\p\miniconda3\envs\mbb-agp-sobe\Lib\site-packages\sklearn\cluster\_kmeans.py:1382: UserWarning: KMeans is known to have a memory leak on Windows with MKL, when there are less chunks than available threads. You can avoid it by setting the environment variable OMP_NUM_THREADS=2.
  warnings.warn(</code></pre>
</div>
</div>
<p>Nach dem Fitting des Modells können wir die Clusterzugehörigkeit der Runden abfragen und die Plausibilität des Clusterings anhand der Visualisierung bewerten:</p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>plot_time_distribution(df_sp9_sectors, hue<span class="op">=</span><span class="st">"cluster_by_car_lap"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="balance_of_performance_files/figure-html/cell-15-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Das Modell ist insbesondere bei den Fahrzeugen, die vergleichsweise wenige Runden gefahren sind, nicht perfekt, fängt aber die Struktur der Verteilung gut ein.</p>
</section>
<section id="evaluation" class="level2">
<h2 class="anchored" data-anchor-id="evaluation">Evaluation<a class="anchor" id="evaluation" href=""></a></h2>
<p>Nun können wir die Clusterinformation nutzen, um ungestörte Rundenzeiten zu selektieren und deren Verteilung für die einzelnen Fahrzeuge zu visualisieren (wir lassen die abgeschlagenen Fahrzeuge ab hier weg):</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>df_sp9_sectors <span class="op">=</span> df_sp9_sectors.query(<span class="st">"car != ['Lamborghini Huracan GT3', 'Lamborghini Huracan GT3 EVO2', 'Aston Martin Vantage AMR GT3']"</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>df_clean_laps <span class="op">=</span> pd.DataFrame(df_sp9_sectors.query(<span class="st">"cluster_by_car_lap == 0"</span>))</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>plot_time_distribution(df_clean_laps, hue<span class="op">=</span><span class="st">"cluster_by_car_lap"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="balance_of_performance_files/figure-html/cell-16-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Für den <em>296 GT3</em> zeigt sich eine gute, wenn auch nicht die klar beste Rundenzeitverteilung. Wir vergleichen abschließend die Sektorzeiten in schnellen Runden zwischen Ferraris und anderen Fabrikaten (in Leserichtung, Sektor 1 links oben):</p>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> chain</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_sector_times(df: pd.DataFrame) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    columns <span class="op">=</span> [[<span class="ss">f"sectortime_</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">"</span>] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">10</span>)]</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    columns <span class="op">=</span> [<span class="op">*</span>columns, [<span class="st">"lap_time"</span>]]</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    columns <span class="op">=</span> <span class="bu">list</span>(chain.from_iterable(columns))</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    dfst <span class="op">=</span> df.loc[:, columns]</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    dfst.columns <span class="op">=</span> pd.MultiIndex.from_tuples(</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>        [<span class="bu">tuple</span>(c.split(<span class="st">"_"</span>)) <span class="cf">for</span> c <span class="kw">in</span> dfst.columns]</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> dfst</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_sectors(df: pd.DataFrame) <span class="op">-&gt;</span> <span class="va">None</span>:</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.copy()</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">10</span>))</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    fig.subplots_adjust(hspace<span class="op">=</span><span class="fl">0.4</span>, wspace<span class="op">=</span><span class="fl">0.4</span>)</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">10</span>):</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>        df_sub <span class="op">=</span> df.query(<span class="ss">f"variable_1 == '</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">'"</span>)</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>        ax <span class="op">=</span> fig.add_subplot(<span class="dv">3</span>, <span class="dv">3</span>, i)</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>        sns.violinplot(</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>            data<span class="op">=</span>df_sub,</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>            y<span class="op">=</span><span class="st">"name"</span>,</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span><span class="st">"value"</span>,</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>            palette<span class="op">=</span><span class="st">"deep"</span>,</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>            cut<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>            showfliers<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>            ax<span class="op">=</span>ax,</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> i <span class="op">%</span> <span class="dv">9</span> <span class="op">!=</span> <span class="dv">1</span>:</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>            ax.<span class="bu">set</span>(yticklabels<span class="op">=</span>[]) <span class="co"># remove axis info</span></span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>            ax.<span class="bu">set</span>(ylabel<span class="op">=</span><span class="va">None</span>)  </span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>            ax.tick_params(left<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>df_ferrari_sectors <span class="op">=</span> (</span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>    get_sector_times(df_clean_laps.query(<span class="st">"car == 'Ferrari 296 GT3'"</span>))</span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>    .melt()</span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">"variable_0 == 'sectortime'"</span>)</span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>df_ferrari_sectors[<span class="st">"is_ferrari"</span>] <span class="op">=</span> <span class="va">True</span></span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>df_ferrari_sectors[<span class="st">"name"</span>] <span class="op">=</span> <span class="st">"Ferrari"</span></span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>df_unferrari_sectors <span class="op">=</span> (</span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>    get_sector_times(df_clean_laps.query(<span class="st">"car != 'Ferrari 296 GT3'"</span>))</span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>    .melt()</span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">"variable_0 == 'sectortime'"</span>)</span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-51"><a href="#cb22-51" aria-hidden="true" tabindex="-1"></a>df_unferrari_sectors[<span class="st">"is_ferrari"</span>] <span class="op">=</span> <span class="va">False</span></span>
<span id="cb22-52"><a href="#cb22-52" aria-hidden="true" tabindex="-1"></a>df_unferrari_sectors[<span class="st">"name"</span>] <span class="op">=</span> <span class="st">"!Ferrari"</span></span>
<span id="cb22-53"><a href="#cb22-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-54"><a href="#cb22-54" aria-hidden="true" tabindex="-1"></a>df_all_sectors <span class="op">=</span> pd.concat([df_ferrari_sectors, df_unferrari_sectors])</span>
<span id="cb22-55"><a href="#cb22-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-56"><a href="#cb22-56" aria-hidden="true" tabindex="-1"></a>plot_sectors(df_all_sectors)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="balance_of_performance_files/figure-html/cell-17-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Hier zeigt sich ein leichter Vorteil für den <em>296 GT3</em>. Insbesondere in den Sektoren <em>8</em> und <em>9</em> macht sich der Unterschied bemerkbar:</p>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_time_ecdf(df: pd.DataFrame, values: <span class="bu">list</span>[<span class="bu">str</span>] <span class="op">=</span> [<span class="st">"lap_time"</span>], hue: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>) <span class="op">-&gt;</span> <span class="va">None</span>:</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.copy()</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    f, ax <span class="op">=</span> plt.subplots(ncols<span class="op">=</span><span class="bu">len</span>(values), figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">2</span>))</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, value <span class="kw">in</span> <span class="bu">enumerate</span>(values):</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>        df[<span class="st">"__sort_q2"</span>] <span class="op">=</span> df.groupby(<span class="st">"car"</span>)[value].transform(np.quantile, q<span class="op">=</span><span class="fl">0.5</span>)    </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>        df.sort_values(<span class="st">"__sort_q2"</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>        p <span class="op">=</span> sns.ecdfplot(</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>            hue<span class="op">=</span>df[<span class="st">"car"</span>],</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span>df[value],</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>            palette<span class="op">=</span><span class="st">"deep"</span>,</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>            ax<span class="op">=</span>ax[i],</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>            legend<span class="op">=</span><span class="va">False</span> <span class="cf">if</span> i<span class="op">==</span><span class="dv">0</span> <span class="cf">else</span> <span class="va">True</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>        p.<span class="bu">set</span>(yticklabels<span class="op">=</span>[])  <span class="co"># remove the tick labels</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>        p.<span class="bu">set</span>(ylabel<span class="op">=</span><span class="va">None</span>)  <span class="co"># remove the axis label</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>        p.tick_params(left<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>    sns.despine()</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>plot_time_ecdf(df_clean_laps.query(<span class="st">"cluster_by_car_lap == 0 and sectortime_9 &lt; 32000"</span>), values<span class="op">=</span>[<span class="st">"sectortime_8"</span>, <span class="st">"sectortime_9"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="balance_of_performance_files/figure-html/cell-18-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Ein Blick auf die Streckenkarte zeigt, dass die Sektoren <em>8</em> und <em>9</em> zur langen Geraden vor Start und Ziel gehören:</p>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dataclasses <span class="im">import</span> dataclass</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="at">@dataclass</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Coords:</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    lat: <span class="bu">float</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    lon: <span class="bu">float</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>map_center <span class="op">=</span> Coords(</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    <span class="fl">50.628615</span>,</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="fl">6.883192</span>,</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>track_center <span class="op">=</span> Coords(<span class="fl">50.35849</span>, <span class="fl">6.95916</span>)</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>tiles <span class="op">=</span> <span class="st">"CartoDB Dark_Matter"</span> <span class="cf">if</span> _DARK_MODE <span class="cf">else</span> <span class="st">"CartoDB positron"</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>nbr_map <span class="op">=</span> folium.Map(</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>    location<span class="op">=</span>[track_center.lat, track_center.lon],</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>    zoom_start<span class="op">=</span><span class="dv">13</span>,</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>    tiles<span class="op">=</span>tiles,</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>    attr<span class="op">=</span><span class="st">'&amp;copy; &lt;a href="https://www.openstreetmap.org/copyright"&gt;OpenStreetMap&lt;/a&gt; contributors &amp;copy; &lt;a href="https://carto.com/attributions"&gt;CARTO&lt;/a&gt;'</span>,</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>    scrollWheelZoom<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>folium.Marker(</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>    [track_center.lat, track_center.lon], popup<span class="op">=</span><span class="st">"Nürburgring track center"</span></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>).add_to(nbr_map)</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a><span class="co"># create a color palette with 9 distinct colors</span></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> sns.color_palette(<span class="st">"Paired"</span>, n_colors<span class="op">=</span><span class="dv">9</span>).as_hex()</span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> style_function(x: <span class="bu">dict</span>) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, <span class="bu">str</span>]:</span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"color"</span>: colors[<span class="bu">int</span>(x[<span class="st">"properties"</span>][<span class="st">"name"</span>][<span class="op">-</span><span class="dv">1</span>]) <span class="op">-</span> <span class="dv">1</span>]}</span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">9</span>):</span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a>    folium.GeoJson(</span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"data/gis/NBR 24h S</span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">.geojson"</span>,</span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a>        style_function<span class="op">=</span>style_function,</span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a>        tooltip<span class="op">=</span><span class="ss">f"Sektor </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">"</span>,</span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a>    ).add_to(nbr_map)</span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a>nbr_map</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -&gt; Trust Notebook</span><iframe srcdoc="<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;></script>
    <script src=&quot;https://code.jquery.com/jquery-1.12.4.min.js&quot;></script>
    <script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;></script>
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/>
    
            <meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; />
            <style>
                #map_665591e325e1372a705500062a557a52 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
</head>
<body>
    
    
            <div class=&quot;folium-map&quot; id=&quot;map_665591e325e1372a705500062a557a52&quot; ></div>
        
</body>
<script>
    
    
            var map_665591e325e1372a705500062a557a52 = L.map(
                &quot;map_665591e325e1372a705500062a557a52&quot;,
                {
                    center: [50.35849, 6.95916],
                    crs: L.CRS.EPSG3857,
                    zoom: 13,
                    zoomControl: true,
                    preferCanvas: false,
                    scrollWheelZoom: false,
                }
            );

            

        
    
            var tile_layer_dfef3b29c7492ac462adb28d4e6a7a2c = L.tileLayer(
                &quot;https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png&quot;,
                {&quot;attribution&quot;: &quot;\u0026copy; \u003ca target=\&quot;_blank\&quot; href=\&quot;http://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors \u0026copy; \u003ca target=\&quot;_blank\&quot; href=\&quot;http://cartodb.com/attributions\&quot;\u003eCartoDB\u003c/a\u003e, CartoDB \u003ca target=\&quot;_blank\&quot; href =\&quot;http://cartodb.com/attributions\&quot;\u003eattributions\u003c/a\u003e&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 18, &quot;maxZoom&quot;: 18, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            ).addTo(map_665591e325e1372a705500062a557a52);
        
    
            var marker_93a760679b442518dc3521499950b25c = L.marker(
                [50.35849, 6.95916],
                {}
            ).addTo(map_665591e325e1372a705500062a557a52);
        
    
        var popup_8a65702f11e66ceddf900383c16e8068 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_32ea87953a7b1db904b228076b8dbcfe = $(`<div id=&quot;html_32ea87953a7b1db904b228076b8dbcfe&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>Nürburgring track center</div>`)[0];
                popup_8a65702f11e66ceddf900383c16e8068.setContent(html_32ea87953a7b1db904b228076b8dbcfe);
            
        

        marker_93a760679b442518dc3521499950b25c.bindPopup(popup_8a65702f11e66ceddf900383c16e8068)
        ;

        
    
    
        function geo_json_72ee47a620ca33a560c0f103adf34023_styler(feature) {
            switch(feature.properties.creator) {
                default:
                    return {&quot;color&quot;: &quot;#a6cee3&quot;};
            }
        }

        function geo_json_72ee47a620ca33a560c0f103adf34023_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_72ee47a620ca33a560c0f103adf34023 = L.geoJson(null, {
                onEachFeature: geo_json_72ee47a620ca33a560c0f103adf34023_onEachFeature,
            
                style: geo_json_72ee47a620ca33a560c0f103adf34023_styler,
        });

        function geo_json_72ee47a620ca33a560c0f103adf34023_add (data) {
            geo_json_72ee47a620ca33a560c0f103adf34023
                .addData(data)
                .addTo(map_665591e325e1372a705500062a557a52);
        }
            geo_json_72ee47a620ca33a560c0f103adf34023_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[6.948302, 50.33595, 620.25], [6.947708, 50.335559, 621], [6.944871, 50.333724, 617.75], [6.943448, 50.332793, 614.5], [6.943126, 50.3326, 614], [6.942748, 50.332389, 612.75], [6.942214, 50.332125, 611.25], [6.941855, 50.331976, 610.5], [6.941326, 50.331756, 609.5], [6.941196, 50.331719, 609.25], [6.941162, 50.331715, 609.25], [6.941088, 50.331727, 609.25], [6.941028, 50.331761, 609], [6.941, 50.331787, 609], [6.940964, 50.331842, 609], [6.940841, 50.332168, 609], [6.940799, 50.332221, 608.75], [6.940763, 50.332229, 608.75], [6.940717, 50.332226, 608.75], [6.940661, 50.332213, 608.75], [6.940533, 50.332165, 608.75], [6.940342, 50.332079, 608.5], [6.940273, 50.332039, 608.5], [6.940199, 50.331984, 608.5], [6.940101, 50.331913, 608.5], [6.940006, 50.331815, 608.75], [6.939926, 50.331701, 608.75], [6.939873, 50.331604, 608.5], [6.93971, 50.33102, 608], [6.939678, 50.330894, 607.75], [6.939583, 50.330564, 606.5], [6.939528, 50.330413, 605.75], [6.939052, 50.329455, 602.5], [6.938761, 50.328871, 600], [6.938735, 50.328819, 600], [6.938706, 50.328759, 599.75], [6.938674, 50.328628, 599], [6.93867, 50.328557, 598.75], [6.938686, 50.32847, 598.5], [6.938729, 50.328378, 598], [6.9388, 50.32828, 597.5], [6.938873, 50.328213, 597.25], [6.93897, 50.328145, 596.75], [6.939099, 50.328081, 596.25], [6.939204, 50.328041, 596], [6.940015, 50.32779, 594], [6.940246, 50.327714, 593.75], [6.940407, 50.327617, 593.25], [6.940461, 50.327557, 592.75], [6.940476, 50.327522, 592.5], [6.940487, 50.327474, 592.25], [6.940488, 50.327387, 591.75], [6.940477, 50.32734, 591.5], [6.940427, 50.327259, 591], [6.94036, 50.327198, 590.5], [6.940335, 50.327174, 590.5], [6.94026, 50.327127, 590.25], [6.940159, 50.327079, 590], [6.939887, 50.326985, 589.25], [6.938913, 50.326645, 584.25], [6.938773, 50.326591, 583.5], [6.938247, 50.326378, 581.75], [6.938091, 50.326308, 581], [6.937475, 50.325997, 577.75], [6.937218, 50.325855, 576.25], [6.936949, 50.325694, 574.75], [6.936663, 50.325503, 573], [6.936554, 50.325427, 572.25], [6.936039, 50.325007, 569.25], [6.935914, 50.324902, 568.25], [6.935746, 50.324745, 567], [6.935595, 50.324588, 566.25], [6.935489, 50.324469, 565.75]], &quot;type&quot;: &quot;LineString&quot;}, &quot;properties&quot;: {&quot;cost&quot;: &quot;1938&quot;, &quot;creator&quot;: &quot;BRouter-1.6.2&quot;, &quot;filtered ascend&quot;: &quot;0&quot;, &quot;messages&quot;: [[&quot;Longitude&quot;, &quot;Latitude&quot;, &quot;Elevation&quot;, &quot;Distance&quot;, &quot;CostPerKm&quot;, &quot;ElevCost&quot;, &quot;TurnCost&quot;, &quot;NodeCost&quot;, &quot;InitialCost&quot;, &quot;WayTags&quot;, &quot;NodeTags&quot;, &quot;Time&quot;, &quot;Energy&quot;], [&quot;6941326&quot;, &quot;50331756&quot;, &quot;610&quot;, &quot;642&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes bridge=unknown&quot;, &quot;&quot;, &quot;51&quot;, &quot;18590&quot;], [&quot;6940964&quot;, &quot;50331842&quot;, &quot;609&quot;, &quot;82&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes bridge=unknown&quot;, &quot;&quot;, &quot;6&quot;, &quot;1528&quot;], [&quot;6940101&quot;, &quot;50331913&quot;, &quot;608&quot;, &quot;101&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes&quot;, &quot;&quot;, &quot;14&quot;, &quot;4601&quot;], [&quot;6939873&quot;, &quot;50331604&quot;, &quot;608&quot;, &quot;50&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes&quot;, &quot;&quot;, &quot;4&quot;, &quot;1203&quot;], [&quot;6939052&quot;, &quot;50329455&quot;, &quot;602&quot;, &quot;249&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes bridge=unknown&quot;, &quot;&quot;, &quot;23&quot;, &quot;5790&quot;], [&quot;6938735&quot;, &quot;50328819&quot;, &quot;600&quot;, &quot;69&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt oneway=yes&quot;, &quot;&quot;, &quot;29&quot;, &quot;7436&quot;], [&quot;6938735&quot;, &quot;50328819&quot;, &quot;600&quot;, &quot;7&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt oneway=yes&quot;, &quot;&quot;, &quot;0&quot;, &quot;128&quot;], [&quot;6940335&quot;, &quot;50327174&quot;, &quot;590&quot;, &quot;260&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes&quot;, &quot;&quot;, &quot;21&quot;, &quot;3810&quot;], [&quot;6938247&quot;, &quot;50326378&quot;, &quot;581&quot;, &quot;180&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes&quot;, &quot;&quot;, &quot;14&quot;, &quot;1005&quot;], [&quot;6935489&quot;, &quot;50324469&quot;, &quot;565&quot;, &quot;298&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive&quot;, &quot;&quot;, &quot;38&quot;, &quot;1257&quot;]], &quot;name&quot;: &quot;NBR 24h S1&quot;, &quot;plain-ascend&quot;: &quot;-51&quot;, &quot;times&quot;: [0, 4.88, 27.92, 39.52, 42.08, 44.96, 48.88, 51.36, 54.96, 55.84, 56.08, 56.56, 57.04, 57.36, 57.92, 60.96, 61.52, 61.76, 62.08, 62.48, 63.36, 64.72, 65.28, 66, 66.88, 67.92, 69.04, 70, 75.28, 76.48, 79.52, 80.96, 89.92, 95.44, 96, 96.56, 97.76, 98.4, 99.2, 100.08, 101.12, 101.92, 102.8, 103.76, 104.48, 109.68, 111.2, 112.48, 113.12, 113.52, 114, 114.8, 115.28, 116.08, 116.8, 117.12, 117.76, 118.48, 120.32, 126.64, 127.6, 131.2, 132.32, 136.8, 138.8, 140.96, 143.36, 144.32, 149.12, 150.32, 152.08, 153.76, 155.04], &quot;total-energy&quot;: &quot;35694&quot;, &quot;total-time&quot;: &quot;154&quot;, &quot;track-length&quot;: &quot;1938&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_72ee47a620ca33a560c0f103adf34023.bindTooltip(
                `<div>
                     Sektor 1
                 </div>`,
                {&quot;sticky&quot;: true}
            );
        
    
        function geo_json_13c89fd860cc9ba7415dafd85d5f396e_styler(feature) {
            switch(feature.properties.creator) {
                default:
                    return {&quot;color&quot;: &quot;#1f78b4&quot;};
            }
        }

        function geo_json_13c89fd860cc9ba7415dafd85d5f396e_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_13c89fd860cc9ba7415dafd85d5f396e = L.geoJson(null, {
                onEachFeature: geo_json_13c89fd860cc9ba7415dafd85d5f396e_onEachFeature,
            
                style: geo_json_13c89fd860cc9ba7415dafd85d5f396e_styler,
        });

        function geo_json_13c89fd860cc9ba7415dafd85d5f396e_add (data) {
            geo_json_13c89fd860cc9ba7415dafd85d5f396e
                .addData(data)
                .addTo(map_665591e325e1372a705500062a557a52);
        }
            geo_json_13c89fd860cc9ba7415dafd85d5f396e_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[6.935489, 50.324469, 565.75], [6.935248, 50.324196, 565], [6.935145, 50.324095, 565.5], [6.935029, 50.324012, 566], [6.934947, 50.323977, 566], [6.934886, 50.32396, 566], [6.934773, 50.323944, 566], [6.934657, 50.323942, 566], [6.934534, 50.323961, 566], [6.934388, 50.324001, 566], [6.934385, 50.324002, 566], [6.934279, 50.324054, 566], [6.934201, 50.324127, 566], [6.934154, 50.324207, 566], [6.934134, 50.324287, 566.25], [6.934138, 50.324378, 566.5], [6.934173, 50.324455, 566.5], [6.934251, 50.32454, 566.75], [6.934625, 50.324777, 567.25], [6.934891, 50.324946, 567.75], [6.935115, 50.32509, 568.25], [6.935785, 50.325517, 571.25], [6.936443, 50.325938, 575.25], [6.936988, 50.326287, 579], [6.937144, 50.326403, 580], [6.937188, 50.326456, 580.25], [6.937207, 50.32648, 580.5], [6.937268, 50.326588, 581.25], [6.937324, 50.326722, 582.5], [6.937343, 50.326795, 583.25], [6.937351, 50.326881, 584.25], [6.937346, 50.326997, 585.25], [6.937309, 50.32715, 587], [6.937246, 50.327274, 588.25], [6.937167, 50.327434, 589.75], [6.937099, 50.32765, 591.5], [6.937091, 50.32775, 592.25], [6.937098, 50.327817, 592.5], [6.937103, 50.327856, 593], [6.937113, 50.327906, 593.25], [6.937163, 50.32804, 594.25], [6.937315, 50.328355, 596.75], [6.937485, 50.328693, 599], [6.938007, 50.329688, 602.25], [6.938146, 50.329976, 602.75], [6.938235, 50.330177, 602.75], [6.938322, 50.330375, 602.75], [6.938684, 50.331109, 604.75], [6.938754, 50.331251, 605.25], [6.938774, 50.331311, 605.25], [6.938786, 50.331369, 605.5], [6.93878, 50.331426, 605.5], [6.938761, 50.331473, 605.5], [6.938712, 50.331541, 605.5], [6.938599, 50.331629, 605.5], [6.938452, 50.331687, 605.25], [6.937221, 50.332031, 602.5], [6.936924, 50.332115, 602], [6.936764, 50.33216, 601.75], [6.936695, 50.332186, 601.75], [6.936578, 50.332246, 601.25], [6.936497, 50.332304, 600.75], [6.936405, 50.332425, 600.25], [6.93636, 50.332542, 600], [6.936347, 50.33269, 599.25], [6.93636, 50.332797, 598.75], [6.936376, 50.33284, 598.75], [6.936431, 50.332916, 598.5], [6.936585, 50.333056, 598.5], [6.937173, 50.33351, 595.75], [6.937879, 50.334049, 590.5], [6.938146, 50.334252, 588.75], [6.939108, 50.335003, 585.75], [6.939339, 50.335184, 585.75], [6.939548, 50.335347, 586], [6.939681, 50.335437, 586.25], [6.939892, 50.335557, 586.5], [6.940205, 50.335673, 587], [6.940353, 50.335713, 587.25], [6.940557, 50.335758, 587.75], [6.941641, 50.33594, 590.5], [6.943315, 50.336223, 595.25], [6.943714, 50.336291, 597], [6.945867, 50.336654, 606.25], [6.945955, 50.336669, 607], [6.946074, 50.336689, 607.75]], &quot;type&quot;: &quot;LineString&quot;}, &quot;properties&quot;: {&quot;cost&quot;: &quot;2203&quot;, &quot;creator&quot;: &quot;BRouter-1.6.2&quot;, &quot;filtered ascend&quot;: &quot;54&quot;, &quot;messages&quot;: [[&quot;Longitude&quot;, &quot;Latitude&quot;, &quot;Elevation&quot;, &quot;Distance&quot;, &quot;CostPerKm&quot;, &quot;ElevCost&quot;, &quot;TurnCost&quot;, &quot;NodeCost&quot;, &quot;InitialCost&quot;, &quot;WayTags&quot;, &quot;NodeTags&quot;, &quot;Time&quot;, &quot;Energy&quot;], [&quot;6934385&quot;, &quot;50324002&quot;, &quot;566&quot;, &quot;116&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive&quot;, &quot;&quot;, &quot;9&quot;, &quot;2984&quot;], [&quot;6935115&quot;, &quot;50325090&quot;, &quot;567&quot;, &quot;137&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive&quot;, &quot;&quot;, &quot;10&quot;, &quot;4763&quot;], [&quot;6936443&quot;, &quot;50325938&quot;, &quot;575&quot;, &quot;158&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive&quot;, &quot;&quot;, &quot;12&quot;, &quot;8879&quot;], [&quot;6937207&quot;, &quot;50326480&quot;, &quot;580&quot;, &quot;80&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes&quot;, &quot;&quot;, &quot;19&quot;, &quot;15555&quot;], [&quot;6937103&quot;, &quot;50327856&quot;, &quot;592&quot;, &quot;161&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes&quot;, &quot;&quot;, &quot;12&quot;, &quot;11080&quot;], [&quot;6937485&quot;, &quot;50328693&quot;, &quot;599&quot;, &quot;104&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes&quot;, &quot;&quot;, &quot;8&quot;, &quot;5660&quot;], [&quot;6938007&quot;, &quot;50329688&quot;, &quot;602&quot;, &quot;117&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt oneway=yes&quot;, &quot;&quot;, &quot;17&quot;, &quot;15096&quot;], [&quot;6938322&quot;, &quot;50330375&quot;, &quot;602&quot;, &quot;58&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes bridge=unknown&quot;, &quot;&quot;, &quot;22&quot;, &quot;18098&quot;], [&quot;6936924&quot;, &quot;50332115&quot;, &quot;602&quot;, &quot;284&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes bridge=unknown&quot;, &quot;&quot;, &quot;22&quot;, &quot;10539&quot;], [&quot;6938146&quot;, &quot;50334252&quot;, &quot;590&quot;, &quot;301&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes bridge=unknown&quot;, &quot;&quot;, &quot;24&quot;, &quot;3487&quot;], [&quot;6943315&quot;, &quot;50336223&quot;, &quot;590&quot;, &quot;358&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes bridge=unknown&quot;, &quot;&quot;, &quot;28&quot;, &quot;11828&quot;], [&quot;6945955&quot;, &quot;50336669&quot;, &quot;607&quot;, &quot;320&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes bridge=unknown&quot;, &quot;&quot;, &quot;25&quot;, &quot;24501&quot;], [&quot;6946248&quot;, &quot;50336719&quot;, &quot;607&quot;, &quot;9&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes&quot;, &quot;&quot;, &quot;26&quot;, &quot;25082&quot;]], &quot;name&quot;: &quot;NBR 24h S2&quot;, &quot;plain-ascend&quot;: &quot;43&quot;, &quot;times&quot;: [0.08, 2.88, 4, 5.04, 5.68, 6.08, 6.8, 7.52, 8.32, 9.28, 9.36, 10.16, 10.96, 11.76, 12.56, 13.44, 14.16, 15.04, 18.08, 20.24, 22.08, 27.52, 32.88, 37.28, 38.72, 39.28, 39.52, 40.56, 41.84, 42.56, 43.36, 44.4, 45.84, 47.04, 48.56, 50.56, 51.52, 52.16, 52.56, 53.04, 54.32, 57.28, 60.48, 69.84, 72.56, 74.48, 76.32, 83.2, 84.56, 85.12, 85.68, 86.24, 86.72, 87.44, 88.48, 89.52, 97.2, 99.12, 100.16, 100.64, 101.52, 102.24, 103.44, 104.56, 105.92, 106.88, 107.28, 108.08, 109.68, 114.96, 121.28, 123.68, 132.4, 134.48, 136.4, 137.52, 139.2, 141.28, 142.24, 143.52, 149.92, 159.84, 162.24, 174.96, 175.52, 176.24], &quot;total-energy&quot;: &quot;103416&quot;, &quot;total-time&quot;: &quot;176&quot;, &quot;track-length&quot;: &quot;2202&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_13c89fd860cc9ba7415dafd85d5f396e.bindTooltip(
                `<div>
                     Sektor 2
                 </div>`,
                {&quot;sticky&quot;: true}
            );
        
    
        function geo_json_cbaef8b4a428ee0cd71da1e738efeaf2_styler(feature) {
            switch(feature.properties.creator) {
                default:
                    return {&quot;color&quot;: &quot;#b2df8a&quot;};
            }
        }

        function geo_json_cbaef8b4a428ee0cd71da1e738efeaf2_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_cbaef8b4a428ee0cd71da1e738efeaf2 = L.geoJson(null, {
                onEachFeature: geo_json_cbaef8b4a428ee0cd71da1e738efeaf2_onEachFeature,
            
                style: geo_json_cbaef8b4a428ee0cd71da1e738efeaf2_styler,
        });

        function geo_json_cbaef8b4a428ee0cd71da1e738efeaf2_add (data) {
            geo_json_cbaef8b4a428ee0cd71da1e738efeaf2
                .addData(data)
                .addTo(map_665591e325e1372a705500062a557a52);
        }
            geo_json_cbaef8b4a428ee0cd71da1e738efeaf2_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[6.946074, 50.336689, 607.75], [6.946248, 50.336719, 609.25], [6.946321, 50.336735, 610], [6.946372, 50.336754, 610.25], [6.946413, 50.336776, 610.75], [6.946483, 50.336829, 611.25], [6.946538, 50.3369, 611.5], [6.946659, 50.337116, 612.25], [6.946753, 50.337215, 612.5], [6.946883, 50.337289, 613], [6.946988, 50.337334, 613.25], [6.947147, 50.337389, 613.75], [6.947199, 50.337399, 614], [6.94733, 50.337426, 614.25], [6.947789, 50.337502, 616], [6.94919, 50.337705, 619.5], [6.949335, 50.337741, 619.75], [6.949486, 50.337808, 620.25], [6.949616, 50.337902, 620.75], [6.949632, 50.337918, 620.75], [6.949663, 50.337947, 620.75], [6.949689, 50.337985, 621], [6.949731, 50.338076, 621.5], [6.94973, 50.338165, 621.75], [6.949719, 50.338221, 621.75], [6.949695, 50.338281, 622], [6.94962, 50.338412, 622], [6.949242, 50.338677, 622.25], [6.949126, 50.338773, 622.5], [6.948824, 50.339046, 623.75], [6.948668, 50.339185, 624.5], [6.948563, 50.339268, 624.75], [6.948462, 50.339314, 625], [6.948377, 50.339337, 625.25], [6.948272, 50.339349, 625.5], [6.948188, 50.339339, 625.75], [6.948092, 50.339307, 625.75], [6.948002, 50.339266, 626], [6.947892, 50.339195, 626], [6.947729, 50.339049, 625], [6.947083, 50.338266, 615.75], [6.946904, 50.338096, 614.75], [6.946772, 50.338004, 614], [6.946545, 50.337874, 612.5], [6.946117, 50.337688, 609], [6.945987, 50.337643, 608], [6.945697, 50.337553, 605.25], [6.945473, 50.337485, 603.25], [6.945071, 50.337374, 600.5], [6.94492, 50.337344, 599.5], [6.944786, 50.337329, 598.75], [6.944652, 50.337319, 598], [6.944531, 50.337318, 597.25], [6.944391, 50.337324, 596.5], [6.944251, 50.337338, 595.75], [6.944076, 50.337369, 594.75], [6.94391, 50.337416, 594], [6.942574, 50.337855, 590], [6.942437, 50.337896, 589.5], [6.942185, 50.337955, 588.75], [6.941844, 50.338016, 587.5], [6.941549, 50.33805, 586.75], [6.940072, 50.338131, 586.5], [6.939949, 50.338132, 586.25], [6.939765, 50.338114, 585.5], [6.939324, 50.337984, 583], [6.939151, 50.337946, 582], [6.939022, 50.337934, 581.75], [6.938907, 50.337937, 581.5], [6.938802, 50.33795, 581.25], [6.93865, 50.337988, 581.25], [6.938545, 50.338032, 581.25], [6.938259, 50.338193, 582], [6.938102, 50.338288, 583.25], [6.938026, 50.338344, 583.75], [6.937909, 50.33845, 584.75], [6.937855, 50.338511, 585], [6.93768, 50.338778, 586.25], [6.937576, 50.338898, 586.5], [6.937501, 50.338957, 586.25], [6.937419, 50.339006, 586.25], [6.937323, 50.33905, 585.75], [6.936869, 50.339231, 583], [6.936745, 50.339287, 582.25], [6.93668, 50.339326, 581.75], [6.936619, 50.339371, 581.5], [6.936555, 50.339439, 581.25], [6.936511, 50.339503, 581], [6.936403, 50.339756, 580.5], [6.93634, 50.339839, 580.25], [6.936274, 50.339893, 580], [6.93621, 50.339929, 579.75], [6.936139, 50.339959, 579.75], [6.936061, 50.339982, 579.5], [6.93595, 50.340003, 579.25], [6.934131, 50.340191, 579.75], [6.933995, 50.340213, 580], [6.933807, 50.340274, 580.5], [6.933721, 50.340322, 580.75], [6.93363, 50.340393, 581], [6.933546, 50.340485, 581.25], [6.93352, 50.340535, 581.25], [6.933507, 50.340577, 581.5], [6.933488, 50.34079, 581.75], [6.93346, 50.340938, 579.75], [6.93341, 50.341055, 577.75], [6.933323, 50.341165, 575.5], [6.933242, 50.34123, 574.25], [6.933087, 50.341321, 572.75], [6.931156, 50.34218, 562.25], [6.930693, 50.342378, 560.5], [6.930262, 50.342564, 559], [6.929554, 50.342883, 557.75], [6.929353, 50.342979, 557.5], [6.92916, 50.343084, 557.5], [6.928969, 50.343199, 557.75], [6.928778, 50.343329, 558.25], [6.928568, 50.343491, 559], [6.927458, 50.344365, 569.25], [6.926686, 50.344974, 576.75], [6.926457, 50.345155, 579], [6.926169, 50.345381, 581], [6.926082, 50.345465, 581.75], [6.925989, 50.345583, 582.5], [6.925945, 50.345677, 582.75], [6.925916, 50.34577, 583], [6.925906, 50.345896, 583], [6.925817, 50.3465, 583.25], [6.925821, 50.346599, 583]], &quot;type&quot;: &quot;LineString&quot;}, &quot;properties&quot;: {&quot;cost&quot;: &quot;2784&quot;, &quot;creator&quot;: &quot;BRouter-1.6.2&quot;, &quot;filtered ascend&quot;: &quot;39&quot;, &quot;messages&quot;: [[&quot;Longitude&quot;, &quot;Latitude&quot;, &quot;Elevation&quot;, &quot;Distance&quot;, &quot;CostPerKm&quot;, &quot;ElevCost&quot;, &quot;TurnCost&quot;, &quot;NodeCost&quot;, &quot;InitialCost&quot;, &quot;WayTags&quot;, &quot;NodeTags&quot;, &quot;Time&quot;, &quot;Energy&quot;], [&quot;6946753&quot;, &quot;50337215&quot;, &quot;612&quot;, &quot;84&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes&quot;, &quot;&quot;, &quot;6&quot;, &quot;4097&quot;], [&quot;6947147&quot;, &quot;50337389&quot;, &quot;613&quot;, &quot;34&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes&quot;, &quot;&quot;, &quot;2&quot;, &quot;956&quot;], [&quot;6949190&quot;, &quot;50337705&quot;, &quot;619&quot;, &quot;151&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes bridge=unknown&quot;, &quot;&quot;, &quot;14&quot;, &quot;11152&quot;], [&quot;6949663&quot;, &quot;50337947&quot;, &quot;620&quot;, &quot;43&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes&quot;, &quot;&quot;, &quot;18&quot;, &quot;13487&quot;], [&quot;6949620&quot;, &quot;50338412&quot;, &quot;622&quot;, &quot;60&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes&quot;, &quot;&quot;, &quot;4&quot;, &quot;1833&quot;], [&quot;6949126&quot;, &quot;50338773&quot;, &quot;622&quot;, &quot;54&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;9&quot;, &quot;4020&quot;], [&quot;6948824&quot;, &quot;50339046&quot;, &quot;623&quot;, &quot;38&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=private oneway=yes bridge=yes toll=yes&quot;, &quot;&quot;, &quot;12&quot;, &quot;6006&quot;], [&quot;6945473&quot;, &quot;50337485&quot;, &quot;605&quot;, &quot;340&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;39&quot;, &quot;12693&quot;], [&quot;6936555&quot;, &quot;50339439&quot;, &quot;581&quot;, &quot;774&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;61&quot;, &quot;16512&quot;], [&quot;6930262&quot;, &quot;50342564&quot;, &quot;560&quot;, &quot;589&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;47&quot;, &quot;12539&quot;], [&quot;6930262&quot;, &quot;50342564&quot;, &quot;559&quot;, &quot;38&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;3&quot;, &quot;415&quot;], [&quot;6929554&quot;, &quot;50342883&quot;, &quot;557&quot;, &quot;62&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=private oneway=yes bridge=yes toll=yes&quot;, &quot;&quot;, &quot;8&quot;, &quot;1379&quot;], [&quot;6926457&quot;, &quot;50345155&quot;, &quot;576&quot;, &quot;314&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;33&quot;, &quot;26706&quot;], [&quot;6925823&quot;, &quot;50346626&quot;, &quot;583&quot;, &quot;203&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;16&quot;, &quot;11200&quot;]], &quot;name&quot;: &quot;NBR 24h S3&quot;, &quot;plain-ascend&quot;: &quot;-23&quot;, &quot;times&quot;: [0, 1.04, 1.52, 1.92, 2.24, 2.88, 3.6, 5.68, 6.72, 7.68, 8.4, 9.44, 9.76, 10.56, 13.28, 21.52, 22.48, 23.6, 24.72, 24.96, 25.28, 25.68, 26.56, 27.36, 27.92, 28.48, 29.76, 32.96, 34.08, 37.12, 38.72, 39.68, 40.4, 40.96, 41.6, 42.16, 42.8, 43.44, 44.4, 46, 53.92, 55.76, 56.88, 58.64, 61.6, 62.48, 64.32, 65.76, 68.32, 69.28, 70.08, 70.88, 71.6, 72.4, 73.28, 74.32, 75.36, 83.92, 84.8, 86.4, 88.48, 90.24, 98.72, 99.44, 100.56, 103.36, 104.48, 105.28, 106, 106.64, 107.6, 108.32, 110.56, 111.84, 112.56, 113.76, 114.4, 117.04, 118.32, 119.04, 119.68, 120.4, 123.52, 124.4, 124.96, 125.52, 126.24, 126.8, 129.2, 130.08, 130.72, 131.28, 131.84, 132.4, 133.12, 143.68, 144.48, 145.76, 146.48, 147.36, 148.32, 148.8, 149.2, 151.12, 152.48, 153.6, 154.72, 155.52, 156.72, 170.16, 173.36, 176.4, 181.36, 182.8, 184.32, 185.84, 187.44, 189.36, 199.44, 206.48, 208.56, 211.2, 212.16, 213.36, 214.24, 215.12, 216.32, 221.76, 222.72], &quot;total-energy&quot;: &quot;97234&quot;, &quot;total-time&quot;: &quot;222&quot;, &quot;track-length&quot;: &quot;2784&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_cbaef8b4a428ee0cd71da1e738efeaf2.bindTooltip(
                `<div>
                     Sektor 3
                 </div>`,
                {&quot;sticky&quot;: true}
            );
        
    
        function geo_json_8a2afad27e14e052d7d882472f193b01_styler(feature) {
            switch(feature.properties.creator) {
                default:
                    return {&quot;color&quot;: &quot;#33a02c&quot;};
            }
        }

        function geo_json_8a2afad27e14e052d7d882472f193b01_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_8a2afad27e14e052d7d882472f193b01 = L.geoJson(null, {
                onEachFeature: geo_json_8a2afad27e14e052d7d882472f193b01_onEachFeature,
            
                style: geo_json_8a2afad27e14e052d7d882472f193b01_styler,
        });

        function geo_json_8a2afad27e14e052d7d882472f193b01_add (data) {
            geo_json_8a2afad27e14e052d7d882472f193b01
                .addData(data)
                .addTo(map_665591e325e1372a705500062a557a52);
        }
            geo_json_8a2afad27e14e052d7d882472f193b01_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[6.925821, 50.346599, 583], [6.925823, 50.346626, 583], [6.925838, 50.346695, 583], [6.925906, 50.34685, 583.5], [6.926478, 50.347712, 583.5], [6.926586, 50.347903, 583.25], [6.926638, 50.34802, 583.25], [6.926672, 50.348127, 583.5], [6.926787, 50.348619, 583.75], [6.926846, 50.348871, 584], [6.926909, 50.349064, 583.5], [6.926937, 50.349206, 583.5], [6.926988, 50.349712, 584.25], [6.926979, 50.349875, 584.75], [6.926951, 50.350029, 585.25], [6.926886, 50.350568, 581.75], [6.926837, 50.35082, 580.25], [6.926815, 50.351027, 577.75], [6.926775, 50.351184, 575.75], [6.926717, 50.351421, 573], [6.926645, 50.351626, 570.5], [6.926464, 50.352062, 565.25], [6.926272, 50.352415, 561], [6.926101, 50.35267, 559.5]], &quot;type&quot;: &quot;LineString&quot;}, &quot;properties&quot;: {&quot;cost&quot;: &quot;709&quot;, &quot;creator&quot;: &quot;BRouter-1.6.2&quot;, &quot;filtered ascend&quot;: &quot;1&quot;, &quot;messages&quot;: [[&quot;Longitude&quot;, &quot;Latitude&quot;, &quot;Elevation&quot;, &quot;Distance&quot;, &quot;CostPerKm&quot;, &quot;ElevCost&quot;, &quot;TurnCost&quot;, &quot;NodeCost&quot;, &quot;InitialCost&quot;, &quot;WayTags&quot;, &quot;NodeTags&quot;, &quot;Time&quot;, &quot;Energy&quot;], [&quot;6926846&quot;, &quot;50348871&quot;, &quot;583&quot;, &quot;241&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;19&quot;, &quot;8526&quot;], [&quot;6925955&quot;, &quot;50352890&quot;, &quot;559&quot;, &quot;468&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;37&quot;, &quot;7549&quot;]], &quot;name&quot;: &quot;NBR 24h S4&quot;, &quot;plain-ascend&quot;: &quot;-22&quot;, &quot;times&quot;: [0, 0.32, 0.96, 2.4, 10.8, 12.64, 13.76, 14.8, 19.28, 21.6, 23.36, 24.64, 29.2, 30.72, 32.16, 37.04, 39.36, 41.28, 42.72, 44.88, 46.8, 50.88, 54.24, 56.72], &quot;total-energy&quot;: &quot;16075&quot;, &quot;total-time&quot;: &quot;56&quot;, &quot;track-length&quot;: &quot;709&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_8a2afad27e14e052d7d882472f193b01.bindTooltip(
                `<div>
                     Sektor 4
                 </div>`,
                {&quot;sticky&quot;: true}
            );
        
    
        function geo_json_306a9de68eab5617e89e0d5d6df29883_styler(feature) {
            switch(feature.properties.creator) {
                default:
                    return {&quot;color&quot;: &quot;#fb9a99&quot;};
            }
        }

        function geo_json_306a9de68eab5617e89e0d5d6df29883_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_306a9de68eab5617e89e0d5d6df29883 = L.geoJson(null, {
                onEachFeature: geo_json_306a9de68eab5617e89e0d5d6df29883_onEachFeature,
            
                style: geo_json_306a9de68eab5617e89e0d5d6df29883_styler,
        });

        function geo_json_306a9de68eab5617e89e0d5d6df29883_add (data) {
            geo_json_306a9de68eab5617e89e0d5d6df29883
                .addData(data)
                .addTo(map_665591e325e1372a705500062a557a52);
        }
            geo_json_306a9de68eab5617e89e0d5d6df29883_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[6.926101, 50.35267, 559.5], [6.925955, 50.35289, 558.5], [6.925627, 50.353344, 556.75], [6.925258, 50.353846, 558.75], [6.924648, 50.354816, 559.75], [6.924283, 50.355416, 558.25], [6.924198, 50.355545, 557.75], [6.924016, 50.355785, 557.25], [6.923876, 50.355936, 556.25], [6.923678, 50.356115, 554.5], [6.923541, 50.356222, 553.25], [6.923391, 50.35633, 552], [6.923159, 50.356476, 550.5], [6.922858, 50.356632, 548.5], [6.922645, 50.356729, 546.75], [6.92247, 50.356798, 545.25], [6.922298, 50.35686, 544.25], [6.921875, 50.356987, 541.75], [6.92065, 50.357339, 537.5], [6.92049, 50.357387, 537], [6.920398, 50.357422, 536.75], [6.920284, 50.357477, 536.5], [6.920193, 50.357536, 536], [6.920135, 50.357586, 535.75], [6.920091, 50.357636, 535.25], [6.92004, 50.357723, 534.5], [6.920017, 50.357794, 534.25], [6.920014, 50.357823, 534], [6.920009, 50.357882, 533.5], [6.920029, 50.357994, 533], [6.920062, 50.358063, 532.5], [6.920111, 50.358131, 532.25], [6.920177, 50.358198, 531.75], [6.920264, 50.35826, 531.25], [6.920383, 50.358326, 531], [6.920512, 50.358374, 530.5], [6.920666, 50.35842, 530], [6.921644, 50.358674, 526.5], [6.922298, 50.358845, 523.25], [6.922951, 50.35902, 518.5], [6.923528, 50.359197, 514.75], [6.923793, 50.359298, 515], [6.923984, 50.359384, 514.75], [6.924302, 50.359588, 512.25], [6.924477, 50.359689, 510.25], [6.924658, 50.359792, 507.5], [6.92482, 50.35987, 505], [6.925549, 50.360169, 499.75], [6.925726, 50.360263, 498.5], [6.925996, 50.360429, 495.75], [6.927094, 50.361174, 483], [6.927439, 50.361388, 480], [6.927727, 50.361546, 476.5], [6.92804, 50.3617, 472.75], [6.928427, 50.361904, 472.25], [6.928676, 50.362054, 473.5], [6.929053, 50.362321, 472.75], [6.929259, 50.362485, 470.5], [6.929294, 50.36252, 470.25], [6.929517, 50.362747, 470.25], [6.929659, 50.362946, 469.75], [6.9301, 50.363643, 468.5], [6.93038, 50.364074, 471.5], [6.930407, 50.364141, 471.75], [6.930424, 50.364216, 472.25], [6.930425, 50.364269, 472.5], [6.930369, 50.365104, 478.75], [6.930392, 50.365204, 479.25], [6.930464, 50.365349, 479.75], [6.930525, 50.365428, 479.75], [6.930613, 50.365514, 479.5], [6.930734, 50.365594, 479.25], [6.930865, 50.365656, 478.5], [6.931219, 50.365799, 476.5], [6.931316, 50.365844, 475.75], [6.931391, 50.365892, 475.5], [6.931509, 50.366007, 475], [6.931615, 50.366167, 474.75], [6.931649, 50.366247, 475], [6.93165, 50.366322, 475.25], [6.931627, 50.366376, 475.75], [6.931585, 50.366433, 476.25], [6.931519, 50.366488, 476.75], [6.931344, 50.366602, 478.25], [6.93129, 50.366646, 478.5], [6.931238, 50.36671, 478.75], [6.931211, 50.366769, 478.75], [6.9312, 50.366838, 478.5], [6.931226, 50.366962, 477.75], [6.931271, 50.367027, 477.25], [6.931404, 50.367131, 476], [6.931657, 50.367294, 474], [6.931937, 50.36746, 471.75], [6.9322, 50.367598, 469.75], [6.932834, 50.367901, 467], [6.933388, 50.368166, 467.25], [6.933657, 50.36832, 467.75], [6.933895, 50.368489, 467.5], [6.934436, 50.368891, 467.75], [6.934598, 50.369012, 468], [6.934878, 50.369195, 468.75], [6.936081, 50.369924, 466.25], [6.93644, 50.370149, 464], [6.936651, 50.370307, 463], [6.937399, 50.370983, 461], [6.937498, 50.371084, 460.5], [6.937564, 50.371167, 460.25], [6.937654, 50.371321, 460], [6.937687, 50.371413, 459.75], [6.937711, 50.371494, 459.75], [6.937725, 50.37166, 459.5], [6.937701, 50.371814, 459.25], [6.937678, 50.371882, 459.25], [6.937445, 50.372474, 458], [6.937325, 50.372804, 459.25], [6.937231, 50.373013, 460.75], [6.937162, 50.373102, 461.5], [6.937123, 50.373141, 462], [6.937073, 50.373176, 462.5], [6.936973, 50.373229, 463.25], [6.936778, 50.37329, 464.75], [6.936609, 50.373315, 465.25], [6.936518, 50.373316, 464.75], [6.935944, 50.373297, 461.25], [6.935843, 50.373298, 460.75], [6.935682, 50.373318, 460], [6.935613, 50.373333, 459.75], [6.935487, 50.373372, 459.5], [6.934784, 50.373635, 455.5], [6.934593, 50.373719, 453], [6.933938, 50.374032, 445.5], [6.933811, 50.3741, 444.25], [6.933738, 50.374153, 443.5], [6.933698, 50.374195, 442.75], [6.933646, 50.37428, 441], [6.933628, 50.374318, 440.25], [6.933619, 50.37439, 439.25], [6.933627, 50.374474, 438.5], [6.933655, 50.374552, 437.75], [6.933689, 50.3746, 437.5], [6.933759, 50.374661, 437.5], [6.933825, 50.374702, 437.5], [6.933935, 50.374754, 437.75], [6.934568, 50.374952, 440.25], [6.934973, 50.375088, 440.25], [6.935285, 50.375196, 439.75], [6.935473, 50.375269, 439.25], [6.93575, 50.375393, 438.25], [6.936283, 50.375681, 435.25], [6.936401, 50.375748, 434.5], [6.936543, 50.375842, 433.5], [6.936654, 50.375954, 432], [6.936701, 50.376022, 431], [6.936747, 50.376109, 429.5], [6.936772, 50.376206, 427.5], [6.936796, 50.376479, 421.75], [6.936815, 50.376534, 420.75], [6.936834, 50.376583, 419.75], [6.936899, 50.376676, 418.5], [6.936989, 50.376774, 416.5], [6.937547, 50.377359, 405.75], [6.937663, 50.377465, 403.75], [6.937833, 50.377583, 402], [6.938025, 50.377686, 400.75], [6.938111, 50.37772, 400.5], [6.93821, 50.377757, 400.25], [6.938453, 50.377821, 399], [6.938674, 50.377868, 396.25], [6.938745, 50.377879, 395.5], [6.938888, 50.377889, 394.5], [6.939093, 50.377883, 393.75], [6.939364, 50.377852, 393.25], [6.939633, 50.377817, 392.75], [6.939781, 50.377785, 392.75], [6.939903, 50.377751, 392.75], [6.94005, 50.377699, 393], [6.940672, 50.377452, 390.25], [6.940774, 50.377406, 389.75], [6.942054, 50.376832, 383.25], [6.942231, 50.376746, 382.75], [6.942348, 50.376663, 382.75], [6.942399, 50.376606, 383.25], [6.942436, 50.37656, 383.75], [6.942567, 50.376323, 386.5], [6.942607, 50.37627, 387], [6.942668, 50.376216, 387.25], [6.942746, 50.376171, 387.25], [6.942802, 50.37615, 386.75], [6.942943, 50.376117, 385.5], [6.943053, 50.37611, 384.25], [6.943114, 50.376117, 383.25], [6.943167, 50.37613, 382.5], [6.943207, 50.376148, 381.5], [6.943303, 50.376219, 379], [6.94348, 50.376418, 374.5], [6.943602, 50.376521, 372.25], [6.943711, 50.376581, 370.75], [6.943856, 50.376633, 369.25], [6.944027, 50.376671, 368.25], [6.944246, 50.376699, 367.25], [6.94469, 50.376737, 365], [6.945077, 50.376759, 363.25], [6.945077, 50.376759, 363], [6.947247, 50.376828, 349.5], [6.94752, 50.376812, 347.75], [6.947781, 50.376777, 346.25], [6.948733, 50.376626, 342.75], [6.949172, 50.376557, 341.75], [6.94933, 50.376549, 341], [6.949491, 50.376565, 339.75], [6.949577, 50.376586, 338.75], [6.949656, 50.376614, 337.75], [6.949741, 50.376652, 336.75], [6.94981, 50.376693, 336], [6.949863, 50.376734, 335.5], [6.949978, 50.376862, 334.5], [6.950105, 50.377, 335], [6.950258, 50.377169, 336.75], [6.950349, 50.377339, 338.5], [6.950397, 50.3775, 340], [6.950405, 50.37758, 340.5], [6.950396, 50.37777, 341], [6.950375, 50.377931, 341.25], [6.950362, 50.378093, 341.75], [6.950373, 50.37818, 342.25], [6.950392, 50.378235, 343], [6.950428, 50.378286, 344], [6.950469, 50.378324, 345], [6.950533, 50.378367, 346], [6.950623, 50.378412, 347.25], [6.950978, 50.378529, 351.75], [6.951498, 50.378677, 356.25], [6.951995, 50.378802, 358.25], [6.952558, 50.378934, 359.25], [6.953279, 50.379087, 360.25], [6.953686, 50.379164, 358.75], [6.954161, 50.379245, 359.5], [6.95513, 50.379379, 362.5], [6.955624, 50.379446, 364.75]], &quot;type&quot;: &quot;LineString&quot;}, &quot;properties&quot;: {&quot;cost&quot;: &quot;5532&quot;, &quot;creator&quot;: &quot;BRouter-1.6.2&quot;, &quot;filtered ascend&quot;: &quot;30&quot;, &quot;messages&quot;: [[&quot;Longitude&quot;, &quot;Latitude&quot;, &quot;Elevation&quot;, &quot;Distance&quot;, &quot;CostPerKm&quot;, &quot;ElevCost&quot;, &quot;TurnCost&quot;, &quot;NodeCost&quot;, &quot;InitialCost&quot;, &quot;WayTags&quot;, &quot;NodeTags&quot;, &quot;Time&quot;, &quot;Energy&quot;], [&quot;6920009&quot;, &quot;50357882&quot;, &quot;534&quot;, &quot;769&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;61&quot;, &quot;14960&quot;], [&quot;6929517&quot;, &quot;50362747&quot;, &quot;470&quot;, &quot;882&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;70&quot;, &quot;2530&quot;], [&quot;6934598&quot;, &quot;50369012&quot;, &quot;467&quot;, &quot;892&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;71&quot;, &quot;35031&quot;], [&quot;6945077&quot;, &quot;50376759&quot;, &quot;363&quot;, &quot;2042&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;163&quot;, &quot;33194&quot;], [&quot;6947247&quot;, &quot;50376828&quot;, &quot;363&quot;, &quot;1&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=90 lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;163&quot;, &quot;33194&quot;], [&quot;6947781&quot;, &quot;50376777&quot;, &quot;346&quot;, &quot;194&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=90 lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;15&quot;, &quot;518&quot;], [&quot;6949978&quot;, &quot;50376862&quot;, &quot;334&quot;, &quot;179&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=70 lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;29&quot;, &quot;1031&quot;], [&quot;6950105&quot;, &quot;50377000&quot;, &quot;335&quot;, &quot;18&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=50 access=private oneway=yes bridge=yes toll=yes&quot;, &quot;&quot;, &quot;31&quot;, &quot;1031&quot;], [&quot;6950375&quot;, &quot;50377931&quot;, &quot;341&quot;, &quot;110&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=50 lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;40&quot;, &quot;5988&quot;], [&quot;6957148&quot;, &quot;50379653&quot;, &quot;364&quot;, &quot;445&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;75&quot;, &quot;44712&quot;]], &quot;name&quot;: &quot;NBR 24h S5&quot;, &quot;plain-ascend&quot;: &quot;-192&quot;, &quot;times&quot;: [0, 2.16, 6.64, 11.6, 20.96, 26.72, 28, 30.4, 32, 34, 35.28, 36.64, 38.56, 40.8, 42.32, 43.52, 44.72, 47.44, 55.12, 56.16, 56.8, 57.68, 58.48, 59.04, 59.6, 60.48, 61.2, 61.52, 62.08, 63.12, 63.84, 64.56, 65.28, 66.08, 67.04, 67.92, 68.96, 75.04, 79.12, 83.2, 86.88, 88.64, 90, 92.64, 94, 95.44, 96.64, 101.6, 102.96, 105.12, 114.24, 117.04, 119.28, 121.6, 124.48, 126.48, 129.76, 131.68, 132.08, 134.48, 136.48, 143.2, 147.36, 148, 148.72, 149.2, 156.64, 157.6, 158.96, 159.76, 160.72, 161.76, 162.72, 165.12, 165.84, 166.48, 167.76, 169.36, 170.16, 170.88, 171.44, 172.08, 172.72, 174.16, 174.72, 175.44, 176, 176.64, 177.76, 178.4, 179.6, 181.68, 183.92, 185.92, 190.48, 194.48, 196.56, 198.64, 203.44, 204.88, 207.2, 216.64, 219.52, 221.44, 228.88, 230, 230.88, 232.4, 233.28, 234.08, 235.6, 237.04, 237.68, 243.12, 246.16, 248.16, 249.12, 249.6, 250.08, 250.88, 252.16, 253.2, 253.76, 257.04, 257.68, 258.64, 259.12, 259.92, 264.56, 265.92, 270.64, 271.6, 272.24, 272.72, 273.6, 274, 274.72, 275.52, 276.24, 276.72, 277.44, 278, 278.8, 282.88, 285.52, 287.6, 288.88, 290.88, 294.88, 295.84, 297.04, 298.24, 298.96, 299.84, 300.72, 303.2, 303.76, 304.24, 305.2, 306.24, 312.4, 313.6, 315.04, 316.48, 317.12, 317.84, 319.36, 320.72, 321.2, 322.08, 323.28, 324.88, 326.48, 327.44, 328.24, 329.2, 333.44, 334.16, 343.12, 344.4, 345.44, 346.08, 346.56, 348.8, 349.36, 350, 350.64, 351.04, 351.92, 352.56, 352.96, 353.36, 353.68, 354.56, 356.64, 357.84, 358.72, 359.68, 360.72, 362, 364.56, 366.8, 366.88, 379.28, 380.88, 382.4, 388, 390.64, 391.6, 392.56, 393.12, 393.68, 394.32, 394.88, 395.36, 396.72, 398.16, 399.92, 401.52, 403.04, 403.76, 405.52, 406.96, 408.48, 409.28, 409.84, 410.4, 410.88, 411.44, 412.16, 414.48, 417.76, 420.88, 424.32, 428.72, 431.2, 434, 439.68, 442.56], &quot;total-energy&quot;: &quot;130427&quot;, &quot;total-time&quot;: &quot;443&quot;, &quot;track-length&quot;: &quot;5532&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_306a9de68eab5617e89e0d5d6df29883.bindTooltip(
                `<div>
                     Sektor 5
                 </div>`,
                {&quot;sticky&quot;: true}
            );
        
    
        function geo_json_7a3be8aee4f3b4942398b24f5af28f2d_styler(feature) {
            switch(feature.properties.creator) {
                default:
                    return {&quot;color&quot;: &quot;#e31a1c&quot;};
            }
        }

        function geo_json_7a3be8aee4f3b4942398b24f5af28f2d_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_7a3be8aee4f3b4942398b24f5af28f2d = L.geoJson(null, {
                onEachFeature: geo_json_7a3be8aee4f3b4942398b24f5af28f2d_onEachFeature,
            
                style: geo_json_7a3be8aee4f3b4942398b24f5af28f2d_styler,
        });

        function geo_json_7a3be8aee4f3b4942398b24f5af28f2d_add (data) {
            geo_json_7a3be8aee4f3b4942398b24f5af28f2d
                .addData(data)
                .addTo(map_665591e325e1372a705500062a557a52);
        }
            geo_json_7a3be8aee4f3b4942398b24f5af28f2d_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[6.955624, 50.379446, 364.75], [6.957148, 50.379653, 372.25], [6.957393, 50.379697, 373], [6.957548, 50.379736, 373.25], [6.957789, 50.37983, 372.5], [6.959611, 50.380702, 372.5], [6.959913, 50.380827, 371.25], [6.960004, 50.380856, 371.75], [6.960095, 50.380876, 371.75], [6.960295, 50.380902, 371.25], [6.960513, 50.380913, 371], [6.960634, 50.380906, 371], [6.960785, 50.380881, 370.75], [6.96095, 50.380818, 371], [6.961028, 50.380775, 371.75], [6.961118, 50.380703, 372.75], [6.961201, 50.380598, 374], [6.961264, 50.380448, 375.75], [6.961356, 50.380156, 379], [6.96138, 50.379914, 381], [6.961253, 50.378969, 386.5], [6.961243, 50.378685, 387], [6.961255, 50.378454, 387.25], [6.961282, 50.378183, 388], [6.961328, 50.377632, 392], [6.961364, 50.37743, 393.5], [6.961409, 50.377253, 395.5], [6.961481, 50.377082, 396.75], [6.961685, 50.376695, 398.5], [6.961804, 50.376513, 403.75], [6.961903, 50.376387, 407], [6.962034, 50.376256, 409.5], [6.962249, 50.376084, 411], [6.962761, 50.375727, 411], [6.962859, 50.375669, 411.75], [6.962903, 50.375644, 412.25], [6.963125, 50.375539, 412.5], [6.963901, 50.375214, 418], [6.964097, 50.375152, 417.5], [6.964757, 50.374978, 411.75], [6.966545, 50.374509, 430.75], [6.966745, 50.374476, 431.5], [6.966961, 50.374455, 432.5], [6.967156, 50.374449, 433], [6.967408, 50.374453, 433.25], [6.969079, 50.374492, 436.75], [6.969394, 50.374488, 437.75], [6.969931, 50.374453, 439.5], [6.972682, 50.37425, 448.25], [6.972814, 50.374234, 449]], &quot;type&quot;: &quot;LineString&quot;}, &quot;properties&quot;: {&quot;cost&quot;: &quot;1805&quot;, &quot;creator&quot;: &quot;BRouter-1.6.2&quot;, &quot;filtered ascend&quot;: &quot;84&quot;, &quot;messages&quot;: [[&quot;Longitude&quot;, &quot;Latitude&quot;, &quot;Elevation&quot;, &quot;Distance&quot;, &quot;CostPerKm&quot;, &quot;ElevCost&quot;, &quot;TurnCost&quot;, &quot;NodeCost&quot;, &quot;InitialCost&quot;, &quot;WayTags&quot;, &quot;NodeTags&quot;, &quot;Time&quot;, &quot;Energy&quot;], [&quot;6962903&quot;, &quot;50375644&quot;, &quot;411&quot;, &quot;1055&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;84&quot;, &quot;80576&quot;], [&quot;6973014&quot;, &quot;50374212&quot;, &quot;449&quot;, &quot;750&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;60&quot;, &quot;61586&quot;]], &quot;name&quot;: &quot;NBR 24h S6&quot;, &quot;plain-ascend&quot;: &quot;84&quot;, &quot;times&quot;: [0, 8.88, 10.4, 11.36, 13.04, 26, 28.08, 28.72, 29.28, 30.48, 31.76, 32.48, 33.44, 34.56, 35.2, 36.08, 37.2, 38.64, 41.36, 43.52, 52, 54.56, 56.64, 59.12, 64.08, 65.92, 67.52, 69.12, 72.8, 74.56, 75.84, 77.28, 79.28, 83.6, 84.4, 84.8, 86.4, 91.76, 93.04, 97.12, 108.16, 109.36, 110.64, 111.76, 113.2, 122.8, 124.64, 127.76, 143.6, 144.4], &quot;total-energy&quot;: &quot;142162&quot;, &quot;total-time&quot;: &quot;144&quot;, &quot;track-length&quot;: &quot;1805&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_7a3be8aee4f3b4942398b24f5af28f2d.bindTooltip(
                `<div>
                     Sektor 6
                 </div>`,
                {&quot;sticky&quot;: true}
            );
        
    
        function geo_json_04541e8dabe7a6df7f578b0d14dffd70_styler(feature) {
            switch(feature.properties.creator) {
                default:
                    return {&quot;color&quot;: &quot;#fdbf6f&quot;};
            }
        }

        function geo_json_04541e8dabe7a6df7f578b0d14dffd70_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_04541e8dabe7a6df7f578b0d14dffd70 = L.geoJson(null, {
                onEachFeature: geo_json_04541e8dabe7a6df7f578b0d14dffd70_onEachFeature,
            
                style: geo_json_04541e8dabe7a6df7f578b0d14dffd70_styler,
        });

        function geo_json_04541e8dabe7a6df7f578b0d14dffd70_add (data) {
            geo_json_04541e8dabe7a6df7f578b0d14dffd70
                .addData(data)
                .addTo(map_665591e325e1372a705500062a557a52);
        }
            geo_json_04541e8dabe7a6df7f578b0d14dffd70_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[6.972814, 50.374234, 449], [6.973014, 50.374212, 450.25], [6.973885, 50.374058, 459.25], [6.975028, 50.373847, 467.5], [6.97529, 50.373784, 469.75], [6.975577, 50.373697, 471.75], [6.975849, 50.373596, 472.75], [6.976096, 50.373486, 472.75], [6.976239, 50.373415, 472.25], [6.976722, 50.373148, 476], [6.97707, 50.372977, 482.25], [6.977274, 50.37289, 484.75], [6.977492, 50.372809, 486.5], [6.9778, 50.372707, 488], [6.978833, 50.372398, 491], [6.97919, 50.372302, 494], [6.979328, 50.372273, 495], [6.979487, 50.372254, 496], [6.97969, 50.37225, 497.25], [6.979816, 50.372256, 498], [6.979974, 50.372268, 499], [6.980469, 50.372323, 501.25], [6.980655, 50.37236, 502], [6.981135, 50.372513, 504.25], [6.982004, 50.372817, 513.5], [6.982347, 50.372954, 516.25], [6.982648, 50.373096, 517.5], [6.98355, 50.373539, 521.25], [6.983973, 50.373775, 525.75], [6.984177, 50.373901, 527], [6.984425, 50.37404, 527.5], [6.984669, 50.374137, 527], [6.984867, 50.374191, 526.5], [6.985044, 50.374224, 526.75], [6.98552, 50.37428, 529], [6.986927, 50.374428, 536.5], [6.98753, 50.374476, 539.25], [6.987775, 50.374509, 540.75], [6.988118, 50.374575, 542.75], [6.988497, 50.37464, 545.25], [6.988662, 50.374658, 546.5], [6.988788, 50.374656, 547.25], [6.988914, 50.374629, 547.5], [6.989035, 50.374586, 547.5], [6.989151, 50.37452, 547.5], [6.989238, 50.374442, 547], [6.989278, 50.374382, 546.5], [6.989293, 50.374334, 546], [6.989302, 50.374226, 544.75], [6.989279, 50.374114, 544.25], [6.989233, 50.374, 545], [6.989153, 50.373889, 545.5], [6.989071, 50.373817, 545.5], [6.988952, 50.373744, 545.5], [6.988367, 50.373433, 545], [6.987997, 50.373261, 545], [6.987799, 50.373176, 545], [6.987609, 50.373079, 545.5], [6.987299, 50.37288, 547.5], [6.987072, 50.372756, 549], [6.986774, 50.372633, 550.75], [6.986427, 50.372461, 551.75], [6.986342, 50.372419, 552.25], [6.986158, 50.372346, 552], [6.98593, 50.372269, 552.25], [6.985754, 50.372205, 552.5], [6.985664, 50.372163, 553], [6.985601, 50.372114, 553.5], [6.98554, 50.372038, 554.25], [6.985515, 50.371959, 555.25], [6.985521, 50.371895, 556], [6.985535, 50.371852, 556.5], [6.98558, 50.371785, 557.25], [6.985661, 50.371719, 557.75], [6.9857, 50.371697, 558], [6.985785, 50.371665, 558], [6.985923, 50.37164, 557.25], [6.986013, 50.371638, 557], [6.986093, 50.371644, 556.75], [6.98617, 50.37166, 556.5], [6.986278, 50.371698, 556], [6.986371, 50.371756, 555.5], [6.986427, 50.371817, 555], [6.986475, 50.371895, 554.75], [6.98656, 50.372046, 554], [6.986645, 50.372156, 553.75], [6.986703, 50.372216, 553.5], [6.986764, 50.372261, 553.25], [6.986826, 50.372303, 553], [6.986982, 50.372391, 552.75], [6.987431, 50.372618, 551.25], [6.987671, 50.372727, 550], [6.987952, 50.372803, 549.75], [6.989557, 50.373132, 555], [6.990073, 50.373239, 557], [6.990336, 50.373279, 559.25], [6.990625, 50.373306, 562], [6.991469, 50.37337, 569.25], [6.991599, 50.37339, 570.25], [6.991672, 50.373409, 571], [6.991819, 50.373462, 572.25], [6.992089, 50.373592, 575], [6.992894, 50.374006, 583], [6.993045, 50.3741, 584.75], [6.993234, 50.374235, 587.5], [6.99334, 50.374325, 589.75], [6.993728, 50.374695, 593.75], [6.993795, 50.374766, 594.5], [6.993852, 50.374828, 595.25], [6.9939, 50.374901, 596], [6.99394, 50.375028, 597.5], [6.993919, 50.3752, 600.25], [6.993809, 50.375551, 605.5], [6.993788, 50.37565, 607], [6.993794, 50.375753, 608.75], [6.993831, 50.375857, 610], [6.993891, 50.375933, 610.5], [6.994172, 50.376205, 612], [6.994615, 50.376624, 615.25], [6.994771, 50.37676, 616.75], [6.994855, 50.376809, 617.25], [6.994999, 50.376868, 618.25], [6.995089, 50.376895, 619], [6.995338, 50.376933, 620.25], [6.99545, 50.376934, 620.5], [6.995601, 50.376922, 620.75], [6.995739, 50.376899, 621], [6.995956, 50.376835, 620.75], [6.996563, 50.376632, 619], [6.996708, 50.37659, 618.25], [6.996975, 50.376542, 617.25], [6.997661, 50.376452, 615.75], [6.997834, 50.376422, 615.5], [6.998828, 50.376227, 614.25], [6.999094, 50.376151, 613.5], [6.999211, 50.376103, 613.25], [6.999324, 50.376048, 612.5], [6.999448, 50.375978, 611.75], [6.999619, 50.37585, 610], [6.999705, 50.375768, 608.75], [6.999913, 50.375561, 605.25], [7.000018, 50.37547, 603.75], [7.000121, 50.375392, 602.5], [7.000224, 50.375334, 601.5], [7.000371, 50.375268, 600.25], [7.000521, 50.375218, 599.25], [7.000843, 50.375129, 597.25], [7.00098, 50.375101, 596.75], [7.001118, 50.375086, 596.25], [7.001567, 50.375074, 595.75], [7.001732, 50.375058, 595.25], [7.001882, 50.375031, 594.75], [7.001985, 50.374998, 594.25], [7.00207, 50.37496, 593.75], [7.002234, 50.374866, 592.25], [7.002709, 50.37452, 590], [7.003145, 50.374204, 588], [7.003447, 50.373967, 588.75], [7.003583, 50.37381, 588.75], [7.003624, 50.373739, 588.5], [7.003667, 50.373626, 588.25], [7.003676, 50.373466, 587.25], [7.00365, 50.373334, 586.75], [7.003634, 50.373283, 586], [7.003596, 50.373211, 585.25], [7.003563, 50.37316, 584.5], [7.003357, 50.372901, 581.75], [7.003165, 50.372633, 576.5], [7.003038, 50.372399, 572.25], [7.002857, 50.372038, 565.25], [7.002819, 50.371942, 563.75], [7.002792, 50.37182, 561.75], [7.002797, 50.371739, 561], [7.002834, 50.371644, 560.25], [7.002866, 50.371595, 560.25], [7.002975, 50.371496, 560.75], [7.003388, 50.371225, 563], [7.003549, 50.37115, 561.5], [7.003772, 50.371068, 559.5], [7.004056, 50.371009, 557.25], [7.004528, 50.370956, 553.25], [7.004813, 50.370918, 550.5], [7.004909, 50.370898, 549.5], [7.005008, 50.370871, 548.5], [7.005084, 50.370837, 548.25], [7.005151, 50.370802, 548.25], [7.005227, 50.370747, 548.25], [7.005288, 50.370685, 547.75], [7.005329, 50.370621, 547.25], [7.005352, 50.370561, 546.75], [7.005488, 50.369697, 541.5], [7.005556, 50.369282, 541.5], [7.005554, 50.369183, 541.5], [7.005518, 50.369068, 544], [7.005492, 50.369026, 544.75], [7.00546, 50.368992, 545.5], [7.005393, 50.368919, 547.25], [7.005333, 50.368872, 548.25], [7.005236, 50.368815, 549.5], [7.005116, 50.368767, 550.5], [7.004996, 50.368732, 551.25], [7.004864, 50.36871, 552.25], [7.004699, 50.368698, 552.75], [7.004466, 50.368699, 553.5], [7.003558, 50.368724, 554.75], [7.002859, 50.36877, 554], [7.002167, 50.368812, 553], [7.001979, 50.368807, 553], [7.001844, 50.368793, 553.5], [7.001726, 50.368765, 554], [7.001654, 50.368743, 554.5], [7.001514, 50.368679, 554.75], [7.001458, 50.368641, 555.25], [7.001408, 50.368595, 555.75], [7.001362, 50.368548, 556.5], [7.001327, 50.368492, 557.5], [7.001258, 50.368311, 560.5], [7.001167, 50.368117, 560.75], [7.001112, 50.368043, 560.75], [7.00105, 50.367976, 560.75], [7.000089, 50.367176, 557.75], [6.999973, 50.367048, 555.75], [6.999768, 50.366745, 552], [6.999586, 50.366431, 548.75], [6.999518, 50.366274, 547], [6.999497, 50.366186, 546], [6.999493, 50.366077, 544.75], [6.999502, 50.36601, 544], [6.999552, 50.365775, 542.5], [6.9996, 50.365553, 541.25], [6.999627, 50.365387, 540.75], [6.999623, 50.365181, 539.75], [6.99959, 50.364864, 538.5], [6.999587, 50.364734, 538], [6.999644, 50.36398, 537.5], [6.999625, 50.363851, 538.25], [6.999589, 50.363769, 538.75], [6.999514, 50.36368, 539.25], [6.999457, 50.363627, 539.75], [6.9991, 50.363357, 542.75], [6.998973, 50.363269, 543], [6.998804, 50.363183, 543.25], [6.998679, 50.363133, 543.25], [6.998527, 50.363089, 543.5], [6.998313, 50.363045, 544], [6.997758, 50.362964, 545.25], [6.997303, 50.36289, 546], [6.997147, 50.362849, 546.25], [6.997007, 50.362798, 546.5], [6.996883, 50.362741, 546.5], [6.996863, 50.362729, 546.5], [6.996771, 50.362678, 546.75], [6.996584, 50.362555, 546.5], [6.995612, 50.36191, 543.25], [6.995427, 50.361772, 543.5], [6.995283, 50.361645, 543.75], [6.995147, 50.361495, 543], [6.994503, 50.360625, 536], [6.994306, 50.360381, 535.75], [6.994172, 50.360255, 535.5], [6.994002, 50.360123, 535], [6.993815, 50.36, 534.75], [6.993536, 50.35985, 535], [6.993376, 50.359777, 535], [6.993255, 50.359733, 534.75], [6.99288, 50.359629, 533.5], [6.992747, 50.359586, 533], [6.992611, 50.359535, 533], [6.992351, 50.359404, 533.25], [6.991884, 50.35916, 534.25], [6.991716, 50.359088, 533.25], [6.991497, 50.359018, 532.75], [6.991334, 50.358977, 532.25], [6.991115, 50.358931, 531.75], [6.990479, 50.358851, 530.25], [6.990233, 50.35882, 529.75], [6.989852, 50.358759, 529.25], [6.989455, 50.358681, 529], [6.987757, 50.358274, 532.25], [6.987351, 50.358199, 532.25], [6.986914, 50.358144, 532.25], [6.986652, 50.358123, 532.5], [6.986182, 50.358109, 534], [6.986024, 50.358117, 534.75], [6.985908, 50.358131, 535], [6.985793, 50.358154, 535.5], [6.985652, 50.358191, 536.25], [6.985547, 50.358225, 536.5], [6.985428, 50.358273, 537.25], [6.985264, 50.358355, 538], [6.984639, 50.358709, 539.75], [6.984415, 50.358815, 540.25], [6.984264, 50.358872, 540.5], [6.984183, 50.358895, 540.75], [6.984017, 50.358929, 541.25], [6.983857, 50.358947, 541.5], [6.983714, 50.358944, 542], [6.983635, 50.358935, 542.25], [6.983473, 50.358905, 542.75], [6.983311, 50.358859, 543.25], [6.983157, 50.358805, 542.5], [6.983146, 50.358801, 542.5], [6.981541, 50.358104, 547.5], [6.981363, 50.358014, 548.25], [6.981268, 50.357942, 548.75], [6.981197, 50.357866, 549], [6.981156, 50.357788, 549.5], [6.981143, 50.357707, 549.75], [6.981172, 50.357624, 550], [6.981199, 50.357577, 550], [6.981228, 50.357534, 550.25], [6.981275, 50.357486, 550.5], [6.981596, 50.357249, 551.5], [6.981803, 50.35711, 551.75], [6.982001, 50.356995, 551.5], [6.982205, 50.356904, 551], [6.982425, 50.356826, 550.5], [6.982732, 50.356737, 549.75], [6.982812, 50.356716, 549.5], [6.983082, 50.356647, 549], [6.983979, 50.356439, 550.5], [6.985151, 50.356202, 554.25], [6.985258, 50.356168, 555], [6.985395, 50.356099, 556], [6.985528, 50.355989, 557.75], [6.985888, 50.355643, 561], [6.985981, 50.355527, 561.5], [6.986044, 50.355419, 561.75], [6.986248, 50.354957, 562.25], [6.986283, 50.354879, 562.5], [6.986319, 50.354752, 561.75], [6.986336, 50.354616, 561], [6.986323, 50.354441, 560.25], [6.986281, 50.354275, 559.5], [6.986249, 50.354191, 559], [6.986139, 50.354009, 557.75], [6.986073, 50.353927, 557.25], [6.985912, 50.353771, 556.25], [6.985735, 50.353642, 555.75], [6.985643, 50.353584, 555.5], [6.985401, 50.353463, 555], [6.985223, 50.353393, 554.75], [6.983624, 50.352836, 554.75]], &quot;type&quot;: &quot;LineString&quot;}, &quot;properties&quot;: {&quot;cost&quot;: &quot;7657&quot;, &quot;creator&quot;: &quot;BRouter-1.6.2&quot;, &quot;filtered ascend&quot;: &quot;229&quot;, &quot;messages&quot;: [[&quot;Longitude&quot;, &quot;Latitude&quot;, &quot;Elevation&quot;, &quot;Distance&quot;, &quot;CostPerKm&quot;, &quot;ElevCost&quot;, &quot;TurnCost&quot;, &quot;NodeCost&quot;, &quot;InitialCost&quot;, &quot;WayTags&quot;, &quot;NodeTags&quot;, &quot;Time&quot;, &quot;Energy&quot;], [&quot;6989302&quot;, &quot;50374226&quot;, &quot;544&quot;, &quot;1351&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;108&quot;, &quot;140614&quot;], [&quot;6986342&quot;, &quot;50372419&quot;, &quot;551&quot;, &quot;299&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;23&quot;, &quot;12967&quot;], [&quot;6985930&quot;, &quot;50372269&quot;, &quot;552&quot;, &quot;43&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown lit=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;3&quot;, &quot;1092&quot;], [&quot;6986475&quot;, &quot;50371895&quot;, &quot;554&quot;, &quot;161&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=unknown maxspeed=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;16&quot;, &quot;9595&quot;], [&quot;6990073&quot;, &quot;50373239&quot;, &quot;555&quot;, &quot;273&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;38&quot;, &quot;20904&quot;], [&quot;6993852&quot;, &quot;50374828&quot;, &quot;594&quot;, &quot;378&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;30&quot;, &quot;41698&quot;], [&quot;6993891&quot;, &quot;50375933&quot;, &quot;610&quot;, &quot;139&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;11&quot;, &quot;11487&quot;], [&quot;7003145&quot;, &quot;50374204&quot;, &quot;590&quot;, &quot;786&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;62&quot;, &quot;22103&quot;], [&quot;7005393&quot;, &quot;50368919&quot;, &quot;545&quot;, &quot;782&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;62&quot;, &quot;5865&quot;], [&quot;6999600&quot;, &quot;50365553&quot;, &quot;542&quot;, &quot;677&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;54&quot;, &quot;31089&quot;], [&quot;6996771&quot;, &quot;50362678&quot;, &quot;546&quot;, &quot;469&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;37&quot;, &quot;19902&quot;], [&quot;6990233&quot;, &quot;50358820&quot;, &quot;530&quot;, &quot;664&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;53&quot;, &quot;15704&quot;], [&quot;6983146&quot;, &quot;50358801&quot;, &quot;542&quot;, &quot;579&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;46&quot;, &quot;31851&quot;], [&quot;6983082&quot;, &quot;50356647&quot;, &quot;549&quot;, &quot;371&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;29&quot;, &quot;20448&quot;], [&quot;6986283&quot;, &quot;50354879&quot;, &quot;562&quot;, &quot;344&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;27&quot;, &quot;21500&quot;], [&quot;6983285&quot;, &quot;50352719&quot;, &quot;554&quot;, &quot;341&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;27&quot;, &quot;6012&quot;]], &quot;name&quot;: &quot;NBR 24h S7&quot;, &quot;plain-ascend&quot;: &quot;110&quot;, &quot;times&quot;: [0, 1.2, 6.4, 13.2, 14.8, 16.64, 18.48, 20.24, 21.28, 24.96, 27.52, 28.96, 30.4, 32.4, 38.96, 41.2, 42.08, 43.04, 44.24, 44.96, 45.92, 48.8, 49.92, 53.04, 58.72, 61.04, 63.2, 69.68, 72.88, 74.56, 76.48, 78.16, 79.44, 80.56, 83.36, 91.52, 95.04, 96.48, 98.56, 100.8, 101.76, 102.48, 103.28, 104.08, 105.04, 105.92, 106.56, 107.04, 108.08, 109.2, 110.32, 111.44, 112.24, 113.2, 117.6, 120.24, 121.6, 123.04, 125.6, 127.36, 129.44, 132, 132.64, 133.92, 135.44, 136.64, 137.28, 137.92, 138.72, 139.44, 140.08, 140.48, 141.2, 142, 142.32, 142.96, 143.84, 144.4, 144.88, 145.36, 146.08, 146.88, 147.52, 148.32, 149.76, 150.88, 151.52, 152.08, 152.64, 153.84, 157.12, 158.8, 160.56, 170.16, 173.28, 174.88, 176.56, 181.44, 182.24, 182.72, 183.76, 185.76, 191.68, 192.88, 194.56, 195.6, 199.6, 200.4, 201.12, 201.84, 203.04, 204.64, 207.84, 208.8, 209.76, 210.72, 211.52, 214.32, 218.88, 220.4, 221.12, 222.16, 222.8, 224.32, 224.96, 225.84, 226.72, 228.16, 232.08, 233.04, 234.64, 238.64, 239.68, 245.6, 247.28, 248.08, 248.96, 249.92, 251.44, 252.32, 254.56, 255.6, 256.56, 257.36, 258.4, 259.44, 261.44, 262.32, 263.12, 265.68, 266.64, 267.6, 268.32, 268.96, 270.24, 274.4, 278.16, 280.96, 282.56, 283.28, 284.32, 285.76, 286.96, 287.44, 288.16, 288.72, 291.36, 294, 296.24, 299.68, 300.64, 301.76, 302.56, 303.44, 303.92, 305.04, 308.48, 309.68, 311.2, 312.96, 315.76, 317.44, 318.08, 318.72, 319.28, 319.84, 320.56, 321.28, 321.92, 322.48, 330.24, 334, 334.96, 336.08, 336.56, 336.96, 337.76, 338.32, 339.12, 340, 340.8, 341.6, 342.56, 343.92, 349.12, 353.2, 357.2, 358.32, 359.12, 359.84, 360.32, 361.36, 361.84, 362.4, 362.96, 363.52, 365.2, 367.04, 367.84, 368.56, 377.6, 378.96, 381.92, 384.96, 386.48, 387.28, 388.32, 388.96, 391.12, 393.12, 394.64, 396.48, 399.36, 400.56, 407.28, 408.48, 409.28, 410.24, 410.88, 414.08, 415.2, 416.48, 417.36, 418.32, 419.6, 422.88, 425.6, 426.64, 427.6, 428.48, 428.64, 429.36, 430.96, 438.96, 440.64, 442.08, 443.68, 452.32, 454.8, 456.16, 457.76, 459.36, 461.44, 462.56, 463.36, 465.76, 466.64, 467.6, 469.52, 472.96, 474.16, 475.6, 476.64, 478, 481.76, 483.2, 485.44, 487.84, 498.24, 500.72, 503.28, 504.8, 507.52, 508.48, 509.2, 509.92, 510.8, 511.52, 512.4, 513.6, 518.4, 520, 521.04, 521.6, 522.64, 523.6, 524.48, 524.96, 526, 527.04, 528.08, 528.16, 539.28, 540.64, 541.52, 542.32, 543.12, 543.92, 544.72, 545.2, 545.68, 546.24, 549.04, 550.8, 552.4, 553.84, 555.28, 557.2, 557.76, 559.44, 564.88, 571.92, 572.64, 573.68, 574.96, 578.72, 579.92, 580.96, 585.28, 586.08, 587.28, 588.56, 590.16, 591.68, 592.48, 594.24, 595.12, 596.8, 598.4, 599.2, 600.96, 602.16, 612.56], &quot;total-energy&quot;: &quot;402144&quot;, &quot;total-time&quot;: &quot;613&quot;, &quot;track-length&quot;: &quot;7656&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_04541e8dabe7a6df7f578b0d14dffd70.bindTooltip(
                `<div>
                     Sektor 7
                 </div>`,
                {&quot;sticky&quot;: true}
            );
        
    
        function geo_json_f663d24bae097978e077b1e3adfa166f_styler(feature) {
            switch(feature.properties.creator) {
                default:
                    return {&quot;color&quot;: &quot;#ff7f00&quot;};
            }
        }

        function geo_json_f663d24bae097978e077b1e3adfa166f_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_f663d24bae097978e077b1e3adfa166f = L.geoJson(null, {
                onEachFeature: geo_json_f663d24bae097978e077b1e3adfa166f_onEachFeature,
            
                style: geo_json_f663d24bae097978e077b1e3adfa166f_styler,
        });

        function geo_json_f663d24bae097978e077b1e3adfa166f_add (data) {
            geo_json_f663d24bae097978e077b1e3adfa166f
                .addData(data)
                .addTo(map_665591e325e1372a705500062a557a52);
        }
            geo_json_f663d24bae097978e077b1e3adfa166f_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[6.983624, 50.352836, 554.75], [6.983285, 50.352719, 555], [6.983168, 50.352674, 554.75], [6.982837, 50.352546, 553.5], [6.973848, 50.349087, 547], [6.971366, 50.348111, 550.25], [6.970825, 50.347898, 551], [6.969392, 50.34732, 556], [6.967984, 50.346754, 563.5], [6.964688, 50.345427, 574.5], [6.959943, 50.343514, 588.5], [6.959676, 50.343396, 588.5], [6.959446, 50.343283, 588.25], [6.959166, 50.343115, 587.75]], &quot;type&quot;: &quot;LineString&quot;}, &quot;properties&quot;: {&quot;cost&quot;: &quot;2058&quot;, &quot;creator&quot;: &quot;BRouter-1.6.2&quot;, &quot;filtered ascend&quot;: &quot;38&quot;, &quot;messages&quot;: [[&quot;Longitude&quot;, &quot;Latitude&quot;, &quot;Elevation&quot;, &quot;Distance&quot;, &quot;CostPerKm&quot;, &quot;ElevCost&quot;, &quot;TurnCost&quot;, &quot;NodeCost&quot;, &quot;InitialCost&quot;, &quot;WayTags&quot;, &quot;NodeTags&quot;, &quot;Time&quot;, &quot;Energy&quot;], [&quot;6983168&quot;, &quot;50352674&quot;, &quot;554&quot;, &quot;38&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=unknown access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;3&quot;, &quot;882&quot;], [&quot;6982837&quot;, &quot;50352546&quot;, &quot;553&quot;, &quot;28&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=private oneway=yes bridge=yes toll=yes&quot;, &quot;&quot;, &quot;5&quot;, &quot;1390&quot;], [&quot;6973848&quot;, &quot;50349087&quot;, &quot;547&quot;, &quot;747&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;65&quot;, &quot;26863&quot;], [&quot;6970825&quot;, &quot;50347898&quot;, &quot;550&quot;, &quot;208&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=90 access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;81&quot;, &quot;38175&quot;], [&quot;6970825&quot;, &quot;50347898&quot;, &quot;551&quot;, &quot;46&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=90 access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;3&quot;, &quot;1291&quot;], [&quot;6969392&quot;, &quot;50347320&quot;, &quot;556&quot;, &quot;121&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=70 access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;13&quot;, &quot;9406&quot;], [&quot;6967984&quot;, &quot;50346754&quot;, &quot;563&quot;, &quot;119&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt maxspeed=50 access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;22&quot;, &quot;20804&quot;], [&quot;6959085&quot;, &quot;50343066&quot;, &quot;587&quot;, &quot;751&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;82&quot;, &quot;74889&quot;]], &quot;name&quot;: &quot;NBR 24h S8&quot;, &quot;plain-ascend&quot;: &quot;34&quot;, &quot;times&quot;: [0, 2.24, 3.04, 5.28, 65.04, 81.68, 85.36, 95.04, 104.56, 126.8, 158.8, 160.72, 162.4, 164.64], &quot;total-energy&quot;: &quot;113064&quot;, &quot;total-time&quot;: &quot;165&quot;, &quot;track-length&quot;: &quot;2058&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_f663d24bae097978e077b1e3adfa166f.bindTooltip(
                `<div>
                     Sektor 8
                 </div>`,
                {&quot;sticky&quot;: true}
            );
        
    
        function geo_json_9b05741c97868333a8b51c405339a036_styler(feature) {
            switch(feature.properties.creator) {
                default:
                    return {&quot;color&quot;: &quot;#cab2d6&quot;};
            }
        }

        function geo_json_9b05741c97868333a8b51c405339a036_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_9b05741c97868333a8b51c405339a036 = L.geoJson(null, {
                onEachFeature: geo_json_9b05741c97868333a8b51c405339a036_onEachFeature,
            
                style: geo_json_9b05741c97868333a8b51c405339a036_styler,
        });

        function geo_json_9b05741c97868333a8b51c405339a036_add (data) {
            geo_json_9b05741c97868333a8b51c405339a036
                .addData(data)
                .addTo(map_665591e325e1372a705500062a557a52);
        }
            geo_json_9b05741c97868333a8b51c405339a036_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[6.959166, 50.343115, 587.75], [6.959085, 50.343066, 587.75], [6.958938, 50.342966, 587.25], [6.957754, 50.342039, 583.75], [6.956216, 50.340844, 589.25], [6.95607, 50.340713, 590.5], [6.955869, 50.340512, 592.25], [6.955774, 50.340398, 593], [6.95542, 50.33992, 596.5], [6.955209, 50.339713, 598], [6.954968, 50.339538, 599.75], [6.953904, 50.338884, 605.5], [6.953834, 50.338835, 605.5], [6.953826, 50.33883, 605.75], [6.953686, 50.338703, 606.25], [6.953628, 50.338637, 606.5], [6.953509, 50.338471, 607], [6.953447, 50.338356, 607.5], [6.953416, 50.338303, 607.5], [6.953326, 50.338198, 607.5], [6.953263, 50.338154, 607.75], [6.953175, 50.338114, 608], [6.953068, 50.338085, 608.5], [6.952957, 50.338074, 609], [6.95278, 50.338079, 609.75], [6.95259, 50.338104, 610.5], [6.952373, 50.338124, 611.5], [6.952283, 50.338121, 611.75], [6.952193, 50.33811, 612.25], [6.952073, 50.338082, 612.75], [6.951973, 50.338049, 613.25], [6.951509, 50.337855, 615.75], [6.951275, 50.337751, 616.75], [6.951227, 50.337731, 616.75], [6.950974, 50.337603, 617.5], [6.949737, 50.336894, 618.5], [6.948303, 50.335951, 620.25]], &quot;type&quot;: &quot;LineString&quot;}, &quot;properties&quot;: {&quot;cost&quot;: &quot;1165&quot;, &quot;creator&quot;: &quot;BRouter-1.6.2&quot;, &quot;filtered ascend&quot;: &quot;31&quot;, &quot;messages&quot;: [[&quot;Longitude&quot;, &quot;Latitude&quot;, &quot;Elevation&quot;, &quot;Distance&quot;, &quot;CostPerKm&quot;, &quot;ElevCost&quot;, &quot;TurnCost&quot;, &quot;NodeCost&quot;, &quot;InitialCost&quot;, &quot;WayTags&quot;, &quot;NodeTags&quot;, &quot;Time&quot;, &quot;Energy&quot;], [&quot;6953826&quot;, &quot;50338830&quot;, &quot;605&quot;, &quot;618&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;49&quot;, &quot;39139&quot;], [&quot;6951509&quot;, &quot;50337855&quot;, &quot;615&quot;, &quot;232&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;18&quot;, &quot;13161&quot;], [&quot;6951275&quot;, &quot;50337751&quot;, &quot;616&quot;, &quot;21&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=private oneway=yes bridge=yes toll=yes&quot;, &quot;&quot;, &quot;20&quot;, &quot;14904&quot;], [&quot;6951227&quot;, &quot;50337731&quot;, &quot;616&quot;, &quot;5&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=private oneway=yes toll=yes&quot;, &quot;&quot;, &quot;20&quot;, &quot;15295&quot;], [&quot;6949737&quot;, &quot;50336894&quot;, &quot;618&quot;, &quot;142&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes&quot;, &quot;&quot;, &quot;32&quot;, &quot;25944&quot;], [&quot;6947708&quot;, &quot;50335559&quot;, &quot;620&quot;, &quot;147&quot;, &quot;1000&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;highway=raceway surface=asphalt access=permissive oneway=yes bridge=unknown&quot;, &quot;&quot;, &quot;43&quot;, &quot;34228&quot;]], &quot;name&quot;: &quot;NBR 24h S9&quot;, &quot;plain-ascend&quot;: &quot;33&quot;, &quot;times&quot;: [0, 0.64, 1.92, 12.64, 26.48, 27.92, 30.08, 31.28, 36, 38.24, 40.32, 48.8, 49.44, 49.52, 50.96, 51.68, 53.36, 54.48, 55.04, 56.16, 56.72, 57.36, 58.08, 58.72, 59.76, 60.88, 62.16, 62.72, 63.28, 64.08, 64.8, 68, 69.68, 70.08, 71.92, 81.44, 93.2], &quot;total-energy&quot;: &quot;73367&quot;, &quot;total-time&quot;: &quot;93&quot;, &quot;track-length&quot;: &quot;1165&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_9b05741c97868333a8b51c405339a036.bindTooltip(
                `<div>
                     Sektor 9
                 </div>`,
                {&quot;sticky&quot;: true}
            );
        
</script>
</html>" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen=""></iframe></div></div>
</div>
</div>
<p>Ein Rennkommissar könnte angesichts dieser Ergebnisse zu dem Schluss kommen, dass es hinreichende Indizien für einen leichten Vorteil des <em>296 GT3</em> gegenüber den anderen Fahrzeugen gibt, um die Balance of Performance einer erneuten Prüfung zu unterziehen. Ein Renningenieur eines der Ferrari-Teams könnte hingegen auf den Gedanken kommen, seinen Fahrern für das nächste Vorbereitungsrennen oder das nächste Qualifikationstraining etwas weniger Drehzahl auf der langen Geraden zu empfehlen.</p>
<section id="kritische-würdigung" class="level3">
<h3 class="anchored" data-anchor-id="kritische-würdigung">Kritische Würdigung<a class="anchor" id="evaluation-krit" href=""></a></h3>
<p>Ein positiver Aspekt dieses Projekts ist, dass es zeigt, wie nützlich das <em>CRISP-DM</em>-Modell für die Arbeit mit großen Datensätzen sein kann. Es ist leicht, sich in den Details und Nebensächlichkeiten solcher Datensätze zu verlaufen.</p>
<p>Auf der anderen Seite war der Aufwand für das Data Wrangling ausgesprochen hoch - ein häufiger Stolperstein in Datenanalyse-Projekten. Die Umwandlung realer Daten in eine für die Analyse geeignete Form erfordert viel Boilerplate-Code und hat hier einen Großteil der Gesamtzeit in Anspruch genommen.</p>
<p>Das verwendete Clustering-Verfahren, GaussianMixture, hat sich als nicht besonders robust erwiesen und benötigte relativ viel manuelles Tuning. Insbesondere war die “richtige” Anzahl von Clustern nicht im Voraus bestimmbar, sondern musste iterativ ermittelt werden. Ein Grid-Search-Ansatz hätte in dieser Situation nützlich sein können, dazu wäre jedoch ein Score nötig gewesen, der die Qualität der Cluster misst, wie zum Beispiel der Silhouette Score <a href="#shahapure2020">[6]</a>.</p>
<p>Schließlich ist zu beachten, dass die Wetterbedingungen während des Rennens 2023 außergewöhnlich konstant waren und es insbesondere immer trocken war. Das wechselhafte Wetter wird in zukünftigen Analysen vorraussichtlich wieder berücksichtigt werden müssen.</p>
</section>
<section id="ausblick" class="level3">
<h3 class="anchored" data-anchor-id="ausblick">Ausblick<a class="anchor" id="evaluation-ausblick" href=""></a></h3>
<p>In zukünftigen Analysen könnten weitere oder andere Verfahren zur Anomalieerkennung zum Einsatz kommen, um die Ergebnisqualität zu verbessern und weitere Einsichten in die Fahrzeugleistung zu gewähren.</p>
<p>Darüber hinaus könnten mehr Daten in die Analyse einbezogen werden. Dies könnte Daten aus dem Training und dem Qualifying, Daten aus weiteren Rennen und Daten von weiteren Strecken umfassen.</p>
<p>Auch könnten wir weitere Features in die Analyse einbeziehen, beispielsweise die Streckentemperatur und eine Bewertung der Fahrerleistung (vergleichbar dem ELO-Score aus dem Schach). Diese könnten dazu beitragen, ein umfassenderes Bild der Faktoren zu zeichnen, die die Rundenzeiten beeinflussen.</p>
</section>
</section>
<section id="vielen-dank-fragen" class="level2">
<h2 class="anchored" data-anchor-id="vielen-dank-fragen">Vielen Dank! Fragen?</h2>
</section>
<section id="referenzen" class="level2">
<h2 class="anchored" data-anchor-id="referenzen">Referenzen<a class="anchor" id="referenzen" href=""></a></h2>
<p>[1]<a class="anchor" id="wikipedia2023a" href=""></a> In Wikipedia, „24-Stunden-Rennen auf dem Nürburgring 2023“, Wikipedia, 29. Mai 2023. https://de.wikipedia.org/w/index.php?title=24-Stunden-Rennen_auf_dem_N%C3%BCrburgring_2023&amp;oldid=234125692 (zugegriffen 1. Juni 2023).</p>
<p>[2]<a class="anchor" id="adac2023a" href=""></a> ADAC Nordrhein e.V., „24h-Teilnehmerportal - Bulletins &amp; BoP“, 2023. https://24h-information.de/index.php?id=102&amp;jahr=2023&amp;uid=5565 (zugegriffen 1. Juni 2023).</p>
<p>[3]<a class="anchor" id="adac2023b" href=""></a> ADAC Nordrhein e.V., „24h-Teilnehmerportal - Zeitnahme / Ergebnisse“, 2023. https://24h-information.de/index.php?id=102&amp;jahr=2023&amp;uid=5561 (zugegriffen 1. Juni 2023).</p>
<p>[4]<a class="anchor" id="skl2023a" href=""></a> The scikit-learn developers, „Gaussian mixture models“, scikit-learn, 2023. https://scikit-learn/stable/modules/mixture.html (zugegriffen 1. Juni 2023).</p>
<p>[5]<a class="anchor" id="skl2023b" href=""></a> The scikit-learn developers, „sklearn.mixture.GaussianMixture“, scikit-learn, 2023. https://scikit-learn/stable/modules/generated/sklearn.mixture.GaussianMixture.html (zugegriffen 1. Juni 2023).</p>
<p>[6]<a class="anchor" id="shahapure2020" href=""></a> K. R. Shahapure und C. Nicholas, „Cluster Quality Analysis Using Silhouette Score“, in 2020 IEEE 7th International Conference on Data Science and Advanced Analytics (DSAA), Sydney, Australia: IEEE, Okt. 2020, S. 747–748. doi: 10.1109/DSAA49011.2020.00096.</p>
<p>[x]<a class="anchor" id="Barron_Suncalcpy_2023" href=""></a> K. Barron, „suncalc-py“. 5. Mai 2023. Zugegriffen: 1. Juni 2023. [Online]. Verfügbar unter: https://github.com/kylebarron/suncalc-py</p>
<p>[x]<a class="anchor" id="DeutscherWetterdienst_ClimateData_2023" href=""></a> Deutscher Wetterdienst, „Climate Data Center“, 2023. https://cdc.dwd.de/portal/shortlink/b0076c6a-0617-4c11-94bd-ff059cafd543 (zugegriffen 1. Juni 2023).</p>
<p>[x]<a class="anchor" id="EuropeanCommission_Regulation9232012_2012" href=""></a> European Commission, „Regulation 923/2012“. 26. September 2012. [Online]. Verfügbar unter: https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:32012R0923</p>
<p>[x]<a class="anchor" id="ThePandasDevelopmentTeam_Pandasmergeasof_2023" href=""></a> The pandas development team, „pandas.merge_asof — pandas 2.0.2 documentation“, 2023. https://pandas.pydata.org/docs/reference/api/pandas.merge_asof.html (zugegriffen 1. Juni 2023).</p>
</section>
<section id="backup" class="level2">
<h2 class="anchored" data-anchor-id="backup">Backup</h2>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>df_race_sectors.groupby(<span class="st">"car_number"</span>).<span class="bu">min</span>().sort_values(<span class="st">"theoretical_best_time"</span>).loc[:, [<span class="st">"team"</span>, <span class="st">"car"</span>, <span class="st">"time_of_day"</span>, <span class="st">"theoretical_best_time"</span>]].head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">team</th>
<th data-quarto-table-cell-role="th">car</th>
<th data-quarto-table-cell-role="th">time_of_day</th>
<th data-quarto-table-cell-role="th">theoretical_best_time</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">car_number</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">20</td>
<td>WTM by Rinaldi Racing</td>
<td>Ferrari 296 GT3</td>
<td>00:02:03.432</td>
<td>485552</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">30</td>
<td>Frikadelli Racing Team</td>
<td>Ferrari 296 GT3</td>
<td>00:08:13.926</td>
<td>486623</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Mercedes-AMG Team Bilstein</td>
<td>Mercedes-AMG GT3</td>
<td>00:02:24.700</td>
<td>487109</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">98</td>
<td>ROWE RACING</td>
<td>BMW M4 GT3</td>
<td>00:01:12.252</td>
<td>487212</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Mercedes-AMG Team GetSpeed</td>
<td>Mercedes-AMG GT3</td>
<td>00:10:28.985</td>
<td>487900</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27</td>
<td>ABT Sportsline</td>
<td>Lamborghini Huracan GT3 EVO2</td>
<td>00:05:33.990</td>
<td>488351</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">911</td>
<td>Manthey EMA</td>
<td>Porsche 911 GT3 R (992)</td>
<td>00:07:58.487</td>
<td>489081</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">99</td>
<td>ROWE RACING</td>
<td>BMW M4 GT3</td>
<td>00:11:00.028</td>
<td>489356</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">72</td>
<td>BMW Junior Team</td>
<td>BMW M4 GT3</td>
<td>00:10:38.355</td>
<td>490034</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Scherer Sport PHX</td>
<td>Audi R8 LMS GT3 evo II</td>
<td>00:06:38.395</td>
<td>490190</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="datenverknüpfung" class="level3">
<h3 class="anchored" data-anchor-id="datenverknüpfung">Datenverknüpfung</h3>
<section id="sonnenstand" class="level4">
<h4 class="anchored" data-anchor-id="sonnenstand">Sonnenstand</h4>
<p>Um Einflüsse durch den Sonnenstand, insbesondere durch Blendung bewerten zu können, bestimmen den Azimut und die Höhe der Sonne für jede Runde mit dem suncalc-Paket von Kyle Barron <a href="#Barron_Suncalcpy_2023">[x]</a>-Paket von Kyle Barron. Wir berechnen die Position der Sonne relativ zu einem willkürlich gewählten Punkt nahe dem Zentrum der Strecke (50°21’30.6”N 6°57’33.0”E) zum Zeitpunkt jeder abgeschlossenen Runde. Wir verwenden dazu nicht den Wert <code>time_of_day</code>, da dieser kein Datum enthält und wir den Übergang vom Samstag zum Sonntag gesondert behandeln müssten. Besser eignet sich der <code>time_elapsed</code>-Wert - die seit dem 20.05.2023 um 00:00:00+02:00 zum Abschluss jeder Runde verstrichene Zeit in Millisekunden:</p>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>elapsed_zero <span class="op">=</span> pd.Timestamp(<span class="st">"2023-05-20 00:00:00"</span>, tz<span class="op">=</span><span class="st">"Europe/Berlin"</span>).tz_convert(<span class="st">"utc"</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>df_sp9_sectors[<span class="st">"lap_timestamp"</span>] <span class="op">=</span> elapsed_zero <span class="op">+</span> df_sp9_sectors[</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"elapsed_time"</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>].astype(<span class="st">"timedelta64[ms]"</span>)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>solar_positions <span class="op">=</span> pd.DataFrame(</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    suncalc.get_position(</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>        df_sp9_sectors[<span class="st">"lap_timestamp"</span>], track_center.lon, track_center.lat</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>df_sp9_sectors <span class="op">=</span> pd.concat([df_sp9_sectors, solar_positions], axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Mit der Ermittlung der Sonnenhöhe für jede Runde sind wir nun in der Lage, die Runden zu unterscheiden, die während der Nachtstunden absolviert wurden. Gemäß der zivilen Dämmerungsgrenze nach der Definition der <a href="http://www.easa.europa.eu/">European Union Aviation Safety Agency (EASA)</a> betrachten wir eine Runde als “unter dunklen Bedingungen” durchgeführt, wenn die Sonnenhöhe unter -6° liegt <a href="#EuropeanCommission_Regulation9232012_2012">[x]</a>. Suncalc gibt die Sonnenhöhe in Radianten zurück, daher müssen wir den Schwellenwert umrechnen: <span class="math inline">\(-\frac{6}{180}\pi \approx -0,10472\)</span></p>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>night_threshold <span class="op">=</span> <span class="op">-</span><span class="dv">6</span> <span class="op">/</span> <span class="dv">180</span> <span class="op">*</span> math.pi</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>df_sp9_sectors[<span class="st">"night"</span>] <span class="op">=</span> df_sp9_sectors[<span class="st">"altitude"</span>] <span class="op">&lt;</span> (night_threshold)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>glare_lower_threshold <span class="op">=</span> <span class="op">-</span><span class="dv">1</span> <span class="op">/</span> <span class="dv">180</span> <span class="op">*</span> math.pi</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>glare_upper_threshold <span class="op">=</span> <span class="dv">15</span> <span class="op">/</span> <span class="dv">180</span> <span class="op">*</span> math.pi</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>df_sp9_sectors[<span class="st">"glare"</span>] <span class="op">=</span> df_sp9_sectors[<span class="st">"altitude"</span>].<span class="bu">apply</span>(</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> x: glare_lower_threshold <span class="op">&lt;</span> x <span class="op">&lt;</span> glare_upper_threshold</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>df_sp9_sectors.sample(<span class="dv">5</span>).loc[:, [<span class="st">"lap_timestamp"</span>, <span class="st">"night"</span>, <span class="st">"glare"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">lap_timestamp</th>
<th data-quarto-table-cell-role="th">night</th>
<th data-quarto-table-cell-role="th">glare</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">car_number</th>
<th data-quarto-table-cell-role="th">lap_number</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">22</td>
<td data-quarto-table-cell-role="th">100</td>
<td>2023-05-21 05:08:43.905000+00:00</td>
<td>False</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">96</td>
<td data-quarto-table-cell-role="th">130</td>
<td>2023-05-21 09:31:00.435000+00:00</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td data-quarto-table-cell-role="th">80</td>
<td>2023-05-21 02:05:22.221000+00:00</td>
<td>True</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">16</td>
<td data-quarto-table-cell-role="th">24</td>
<td>2023-05-20 17:36:49.583000+00:00</td>
<td>False</td>
<td>True</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">100</td>
<td data-quarto-table-cell-role="th">59</td>
<td>2023-05-20 23:13:33.035000+00:00</td>
<td>True</td>
<td>False</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="wetter" class="level4">
<h4 class="anchored" data-anchor-id="wetter">Wetter</h4>
<p>Wir fügen Wetterdaten hinzu, um die Rundenzeiten in Abhängigkeit von den Wetterbedingungen analysieren zu können. Wir beziehen die Wetterdaten vom <a href="https://www.dwd.de/EN/Home/home_node.html">Deutschen Wetterdienst (DWD)</a>, der aktuelle und historische Stationsdaten im CSV-Format zur Verfügung stellt. Wir nutzen die Lufttemperatur in 2 Metern Höhe (OBS_DEU_PT10M_T2M) und den Luftdruck auf Stationsniveau (OBS_DEU_PT10M_PP), die an der Station Nürburg-Barweiler in 10-Minuten-Intervallen gemessen wurden (etwa 6,34 km vom Referenzpunkt entfernt) <a href="#DeutscherWetterdienst_ClimateData_2023">[x]</a>.</p>
<p>Spaßiges Problem: Die CSV des DWD haben ein zusätzliches abschließendes Trennzeichen pro Zeile, was dazu führt, dass der Pandas-CSV-Parser die erste Spalte als Zeilenindex des DataFrames behandelt und die restlichen Daten sich ein Feld nach links schieben. Um dies zu beheben, übergeben wir <code>index_col=False</code> an <code>pd.read_csv()</code>.</p>
<p>Wir stellen sicher, dass die Zeitstempel auf die gleiche Zeitzone wie die Rundenzeiten gesetzt sind und indizieren die Wetterdaten nach Zeitstempel, um das Zusammenführen zu erleichtern.</p>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_weather_data(filename: <span class="bu">str</span>) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    weather_data <span class="op">=</span> pd.read_csv(</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>        filename,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>        sep<span class="op">=</span><span class="st">","</span>,</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>        index_col<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>        usecols<span class="op">=</span>[<span class="st">"Zeitstempel"</span>, <span class="st">"Wert"</span>],</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>        <span class="co"># parse_dates=["Zeitstempel"],</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    weather_data[<span class="st">"Zeitstempel"</span>] <span class="op">=</span> pd.to_datetime(weather_data[<span class="st">"Zeitstempel"</span>], utc<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    weather_data.set_index(<span class="st">"Zeitstempel"</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> weather_data</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>air_temp_df <span class="op">=</span> read_weather_data(<span class="st">"data/weather/data_OBS_DEU_PT10M_T2M_3660.csv"</span>)</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>air_temp_df.rename(columns<span class="op">=</span>{<span class="st">"Wert"</span>: <span class="st">"air_temperature"</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>air_pressure_df <span class="op">=</span> read_weather_data(<span class="st">"data/weather/data_OBS_DEU_PT10M_PP_3660.csv"</span>)</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>air_pressure_df.rename(columns<span class="op">=</span>{<span class="st">"Wert"</span>: <span class="st">"air_pressure"</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>atm_df <span class="op">=</span> pd.merge(</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>    air_temp_df,</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>    air_pressure_df,</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>    left_index<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>    right_index<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>atm_df.sample(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">air_temperature</th>
<th data-quarto-table-cell-role="th">air_pressure</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Zeitstempel</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2023-05-21 23:30:00+00:00</td>
<td>15.1</td>
<td>958.1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2023-05-21 02:10:00+00:00</td>
<td>9.8</td>
<td>959.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2023-05-22 19:40:00+00:00</td>
<td>15.8</td>
<td>959.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2023-05-20 07:00:00+00:00</td>
<td>11.0</td>
<td>962.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2023-05-21 20:00:00+00:00</td>
<td>16.9</td>
<td>958.3</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Wir verknüpfen nun die gesammelten Wetterdaten mit unseren Rundenzeiten. Da die Zeitstempel der Wettermessungen nicht mit den Durchgangszeiten synchronisiert sind, führen wir einen <strong>Merge nach Schlüsseldistanz</strong> <a href="#ThePandasDevelopmentTeam_Pandasmergeasof_2023">[x]</a> durch und fügen jeder Runde den zeitlich nächsten Messwert hinzu:</p>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Both dataframes must be sorted by timestamp</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>df_sp9_sectors.sort_values(by<span class="op">=</span><span class="st">"lap_timestamp"</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>atm_df.sort_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>df_sp9_sectors <span class="op">=</span> pd.merge_asof(</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    df_sp9_sectors,</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    atm_df,</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    left_on<span class="op">=</span><span class="st">"lap_timestamp"</span>,</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    right_index<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    direction<span class="op">=</span><span class="st">"nearest"</span>,</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>df_sp9_sectors.sample(<span class="dv">5</span>).loc[:, [<span class="st">"lap_timestamp"</span>, <span class="st">"air_temperature"</span>, <span class="st">"air_pressure"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">lap_timestamp</th>
<th data-quarto-table-cell-role="th">air_temperature</th>
<th data-quarto-table-cell-role="th">air_pressure</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">car_number</th>
<th data-quarto-table-cell-role="th">lap_number</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">72</td>
<td data-quarto-table-cell-role="th">81</td>
<td>2023-05-21 02:08:11.064000+00:00</td>
<td>9.8</td>
<td>959.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td data-quarto-table-cell-role="th">70</td>
<td>2023-05-21 00:30:18.365000+00:00</td>
<td>10.2</td>
<td>959.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25</td>
<td data-quarto-table-cell-role="th">19</td>
<td>2023-05-20 16:46:51.553000+00:00</td>
<td>14.8</td>
<td>960.9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td data-quarto-table-cell-role="th">17</td>
<td>2023-05-20 16:29:23.631000+00:00</td>
<td>15.3</td>
<td>960.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td data-quarto-table-cell-role="th">50</td>
<td>2023-05-20 21:24:28.860000+00:00</td>
<td>11.3</td>
<td>960.9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Wir vergleichen die Rundenzeiten unter Blendbedingungen und ohne Blendbedingungen:</p>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>sns.violinplot(data<span class="op">=</span>df_sp9_sectors, y<span class="op">=</span><span class="st">"car"</span>, x<span class="op">=</span><span class="st">"lap_time"</span>, hue<span class="op">=</span><span class="st">"glare"</span>, split<span class="op">=</span><span class="va">True</span>, showfliers<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>&lt;Axes: xlabel='lap_time', ylabel='car'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="balance_of_performance_files/figure-html/cell-25-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Und wir stellen den gleichen Vergleich für die Rundenzeiten unter Tages- und Nachtbedingungen an:</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>sns.violinplot(data<span class="op">=</span>df_sp9_sectors, y<span class="op">=</span><span class="st">"car"</span>, x<span class="op">=</span><span class="st">"lap_time"</span>, hue<span class="op">=</span><span class="st">"night"</span>, split<span class="op">=</span><span class="va">True</span>, showfliers<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>&lt;Axes: xlabel='lap_time', ylabel='car'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="balance_of_performance_files/figure-html/cell-26-output-2.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>